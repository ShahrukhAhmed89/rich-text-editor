/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.1.1
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,n,t){function be(e){return n[r+"Element"](e)}function we(e){return e.toLowerCase()}function $e(e){return"string"==typeof e}function xe(e){return 3===e.nodeType}function me(e){return"undefined"==typeof e}function ye(e){return"function"==typeof e}function ke(e,n){return new RegExp(e,n)}function Me(e,n){return e.join(n||"")}function ze(e,n){return n=n||"[\\w-:]+",e[k](ke("<\\/"+n+">|<"+n+"(\\s[^<>]*?)?>","gi"),"")[k](/ +/g," ")[k](/^\s*|\s*$/g,"")}function Ce(e,n,t){return e[a](n,t,ue)}function Se(e,n,t){return e[l](n,t)}function Ae(e){var c,t=be(ce),i=n[r+"DocumentFragment"](),f=[],s=[],a="";if($e(e)){for(t[u]=e;c=t[b];)s.push(we(c[$]||"")),f.push(i[v](c));return[f,i,s,e]}for(s in e)c=e[s],$e(c)?(a+=c,t[u]=c,c=t[b]):a+=c[o],f.push(we(c[$]||"")),i[v](c);return[e,i,f,a]}var ge,pe,i="__instance__",r="create",f="style",s="minHeight",u="innerHTML",o="outerHTML",c="className",a="addEventListener",l="removeEventListener",v="appendChild",d="removeChild",h="parentNode",g="children",p="childNodes",b="firstChild",w="insertBefore",$="nodeName",x="getAttribute",m="setAttribute",y="removeAttribute",k="replace",M="value",z="length",C="indexOf",S="substring",A="preventDefault",E="click",R="focus",L="blur",B="select",N="keydown",T="paste",j="error",_="test",H="contenteditable",K="readonly",O="spellcheck",D="placeholder",I="getSelection",U="getRangeAt",q="rangeCount",F="addRange",X="removeAllRanges",G=r+"Range",J="cloneContents",P="deleteContents",Q=B+"Node",V=Q+"Contents",W="insertNode",Y="cloneRange",Z="collapse",ee="setStart",ne="setEnd",te=ee+"Before",ie=ee+"After",re=ne+"Before",fe=ne+"After",se=!0,ue=!1,oe=null,ce="div",ae="ctrlKey",le="shiftKey",de="keyCode",he=setTimeout;!function(e){e.version="1.1.1",e[i]={},e.each=function(n,t){return he(function(){var r,t=e[i];for(r in t)n(t[r],r,t)},0===t?0:t||1),e},e.x="​"}(e[t]=function(o,a){function Qe(){return ge=e[I]&&e[I]()||{},ge[q]&&ge||oe}function Ve(e){return ge=Qe(),ge&&ge[U](e||0)||oe}function We(e,n,t){if(e){if(ge=Qe()){var r,f,i=be(ce);for(r=0,f=ge[q];f>r;++r)i[v](ge[U](r)[J]());return e=Me(i[u].split(_e)),e=me(n)||n?l.f(e):e,me(t)||t?e:e[k](ke(Ue,"g"),"\n\n")[k](ke(qe,"g"),"")}return""}return Qe()+""}function Ye(e,n){var r,f,s,o,t=We(1,0,0),i=Ae(t);if(i&&i[0][z]&&(pe=Ve(),pe[P](),pe[W](i[1])),i=i[0],e){for(s=0,o=i[z];o>s;++s)if(r=i[s],we(r[$])===e)return r;return(me(n)||n)&&(s=tn(),f=en(_e+t),f=f&&f[0]&&f[0][h],f&&we(f[$])===e&&f!==Ne)?(f[u]=Me(f[u].split(_e)),t&&t!==f[u]?rn(s):sn([f]),f):oe}return i[z]?i:oe}function Ze(e){return(pe=Ve())&&(e=1===e?ue:0===e?se:e,pe[Z](e)),pe}function en(e,n){if(l.is[R]){var t=Ae(e);return(ge=Qe())&&(pe=Ve(),pe[P](),pe[W](t[1]),0===n?Ze(1):1===n&&(en(e,se),Ze(0)),ge[X](),ge[F](pe)),t[0]}return oe}function nn(n){try{var t=Ye("a"),i=ze(We(1,1,0),"a");n=ze(n[k](/^\s*javascript:/i,""));var f=n[0],s=e.location.hostname;return f=-1!=="/?&#"[C](f)||-1===n[C]("/"),!s||0!==n[C]("//"+s)&&-1===n[C]("://"+s)||(f=1),n?(t?t[m]("href",n):t=en('<a href="'+n+'">'+i+"</a>",se)[0],f?(t[y]("rel"),t[y]("target")):(t[m]("rel","nofollow"),t[m]("target","blank"))):(t&&(i=t[u],t[h][d](t)),t=en(i,se)[0]),t}catch(o){}return oe}function tn(){var e,n,t;return(e=Ve())?(n=e[Y](),n[V](Ne),n[ne](e.startContainer,e.startOffset),t=(n+"")[z],[t,t+(e+"")[z]]):oe}function rn(t){if(t){var r,s,o,c,a,l,i=n[G](),f=0,u=[Ne];for(i[ee](Ne,0),i[Z](se);!l&&(c=u.pop());)if(xe(c))s=f+c[z],!a&&t[0]>=f&&t[0]<=s&&(i[ee](c,t[0]-f),a=1),a&&t[1]>=f&&t[1]<=s&&(i[ne](c,t[1]-f),l=1),f=s;else for(o=c[p][z];o--;)u.push(c[p][o]);r=e[I](),r[X](),r[F](i)}}function fn(){return Ae(We(1,1,0))[0]}function sn(e,n){n=me(n)||!n;var t=e[0],i=e[e[z]-1];return ge=Qe(),pe=Ve(),1===e[z]?pe[n?V:Q](t):(pe[n?ie:te](t),pe[n?re:fe](i)),ge[X](),ge[F](pe),e}function un(e,n,t){if(l.is[R]){me(n)&&(n=-1);var s,o,c,a,i=Ye(e),r=We(1,0,0),f=[];if(0===n||-1===n&&i){if(i){s=i[u],i[h][d](i);var g=ze(r),p=ze(s);if(-1!==p[C](g)&&g[z]<p[z])o=s[S](0,s[C](g)),o&&en("<"+e+">"+o+"</"+e+">",0),o=s[S](s[C](g)+g[z]),o&&en("<"+e+">"+o+"</"+e+">",1),f=en(g,se);else{if(f=Ae(r),s=be(ce),f&&f[2]&&(a=f[2][z]))for(c=0;a>c;++c)f[2][c]===e?s[u]+=f[0][c][u]:s[v](f[0][c]);f=en(s[u],se)}}}else(1===n||-1===n&&!i)&&(r=r&&r[k](ke("(\\n|"+De+"){2,}","gi"),"</"+e+">"+je+je+"<"+e+">"),f=en("<"+e+">"+(r||t||"")+"</"+e+">",se));return f[0]||oe}return oe}function on(e,n){R in e&&(e.selectionStart=e.selectionEnd=me(n)?e[M][z]:n,e[R]())}function xn(e,n){var t=e[c];return ke("(^|\\s)\\s*"+n+"\\s*(\\s|$)")[_](t)?e:(e[c]=ze(t+" "+n),e)}function mn(e,n){var t=ze(e[c][k](ke("(^|\\s)\\s*"+n+"\\s*(\\s|$)","g"),"$1$2"));return t?e[c]=t:e[y]("class"),e}function yn(e,n,t,i){function s(e){i.apply(this,[e,l,r]),Mn(),Ne[R](),ye(vn)&&vn(e,l,Ne),e[A]()}var r=xn(be("a"),n),f=t[1]||t[0];return 0===f[C]("svg:")&&(f=$e+f.slice(4)+Ee),r[u]="<span>"+f+"</span>",r.title=e,r.href="javascript:;",i&&(Ce(r,"touchstart",s),Ce(r,"mousedown",s)),[r,i]}function kn(){Ne[u]=l.f(o[M])[k](ke(Ue,"gi"),je+je)[k](ke(qe,"gi"),"")}function Mn(){var e=l.f(Ne[u]);Re.tidy&&(e=e[k](ke(Ue,"gi"),"</p>\n\n<p$1>")[k](ke(He,"gi"),je+"\n")),o[M]=e}function zn(e){return we(e.key||String.fromCharCode(e[de]))}function An(e){var n=e[ae],t=e[le],i=e[de],r=zn(e);n&&t&&("x"===r||88===i)&&ln?($n.x[1](),e[A]()):t||"enter"!==r&&13!==i||ye(an)&&an(e,l,o),ye(vn)&&vn(e,l,o),he(function(){kn(),rn(l.$[1])},1)}function En(){if(Le[h])return l;xn(o,dn+"-source"),Ce(o,N,An),Je=Re.tools;for(Pe in Je)if(Pe=Je[Pe],$n[Pe]){if("x"===Pe&&!ln)continue;Be[v]($n[Pe][0])}Le[v](Ne),Cn&&"p"===we(Cn[$])&&(Cn[w](Sn,o),Cn[h][w](o,Cn),Cn[h][d](Cn)),o[h][w](Le,o),Le[v](o),Le[v](Be),xn(Te,dn+"-d"),Te[u]='<input type="text">',l.d.x();var e=Te[g][0];return e[m](O,ue),Ce(e,E,function(){l.is[j]=ue,mn(Le,j)}),Ce(e,N,function(e){var n=this,t=e[ae],i=e[le],r=e[de],f=zn(e);t||i||"enter"!==f&&13!==r?i||"escape"!==f&&27!==r&&(n[M][z]||"backspace"!==f&&8!==r)||(l.d.x(1,1),Ge=0,e[A]()):(l.d.x(1,1),Ge&&Ge(e,l,n),Ge=0,n[M]="",ye(vn)&&vn(e,l,Ne),e[A]())}),Le[v](Te),l}function Rn(){return Le[h]?(Cn&&(Le[h][w](Cn,Le),Cn[w](o,Sn),Cn[d](Sn)),o[f][s]="",o[x](f)||o[y](f),mn(o,dn+"-source"),Se(o,N,An),Le[h][d](Le),l):l}var Ge,Je,Pe,l=this,b="⌘",ve="⇧",$e='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',Ee='"></path></svg>',Re={classes:["rich-text-editor"],tags:["a|abbr|b|br|code|dfn|del|em|i|ins|kbd|mark|p|span|strong|u|var"],blocks:["article|aside|blockquote|figure|figcaption|figure|h[1-6]|header|div|li|[ou]l|p|pre|section|table|tr|th"],attributes:["class|data-[\\w-]+?|href|id|rel|style|target|title"],tools:["b","i","u","x"],text:{b:["Bold",$e+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+Ee,b+"+B"],i:["Italic",$e+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+Ee,b+"+I"],u:["Underline",$e+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+Ee,b+"+U"],a:["Link",$e+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+Ee,b+"+L"],x:["Source",$e+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+Ee,b+"+"+ve+"+X"]},tidy:1,enter:1,x:1,update:0},Le=be(ce),Be=be(ce),Ne=be(ce),Te=be(ce),je="<br>",_e=e[t].x,He="<br(\\s[^<>]*?)?\\s*\\/?>",Ke="<p(\\s[^<>]*?)?>",Oe="<\\/p>",De="\\s*(?:"+He+")\\s*",Ie="^\\s*"+Ke+"(?:"+De+")*\\s*|\\s*(?:"+De+")*"+Oe+"\\s*$",Ue="\\s*(?:"+De+")*"+Oe+"\\s*"+Ke+"(?:"+De+")*\\s*",qe="\\s*(?:"+Ke+"(?:"+De+")*|(?:"+De+")*"+Oe+")\\s*",Fe="\\s*"+Ke+"(?:"+De+")*\\s*(?:"+De+")*"+Oe+"\\s*",Xe="\\s*"+Ke+"(?:"+De+")*(?:[\\s\\S]*?)(?:"+De+")*"+Oe+"\\s*";l.$=[oe,oe],l.$$=function(e,n){var t=[Qe(),Ve(n)];return me(e)?t:t[e]},l.d=function(e,n,t){var i=Te[g][0];return i[D]=e,i[M]=n,he(function(){on(i)},1),Ge=t,l.d.v(1),l},l.d.x=function(e,n){var t=Te[g][0],i=t[M];return i&&!n?(xn(Le,j),cn[j]=se,cn.d=se,he(function(){l.is[R]=ue,l.is[L]=se,t[R](),t[B]()},1)):(mn(Le,"d"),mn(Le,j),cn.d=ue),l.is[R]=se,l.is[L]=ue,e&&(l[R](),rn(l.$[1])),l},l.d.v=function(e){return xn(Le,"d"),mn(Le,j),l.is[j]=ue,cn.d=se,l.$[1]=e?tn():oe,l},e[t][i][o.id||o.name||Object.keys(e[t][i])[z]]=l,a=a||{};for(Pe in Re)me(a[Pe])||(Re[Pe]=a[Pe]);l.is={view:se,source:ue,d:ue,e:function(e){l.$[1]=tn();var n=Ye(e);return rn(l.$[1]),n?se:ue},focus:ue,blur:se,error:ue};var cn=l.is,an=Re.enter,ln=Re.x,vn=Re.update,dn=Re.classes[0],hn=Re.text||{},gn=Me(Re.tags,"|"),pn=Me(Re.attributes,"|"),bn=Me(Re.blocks,"|"),wn=0,$n={b:function(){un("strong")},i:function(){un("em")},u:function(){un("u")},a:function(e){var t,i,n=ze(We(1,1,0))[k](/\s+/g,"%20");/^[a-z\d]+:\/\/\S+$/[_](n)?Ye("a")?un("a",0):nn(n):cn.d?l.d.x(1):((t=Ye("a"))&&(i=t[x]("href")),l.d("http://",(i?i[k](/\/+$/,""):"http://"+we(n))||"",function(e,n,t){nn(t[M])}),he(function(){i&&Te[g][0][B]()},2))},x:function(e){if(ln){var n=Ne.offsetHeight;n&&(o[f][s]=n+"px"),wn?(l.$[0]=tn(),xn(Le,"view"),mn(Le,"source"),Ne[R](),rn(l.$[1]),wn=0):(l.$[1]=tn(),xn(Le,"source"),mn(Le,"view"),o[R](),rn(l.$[0]),wn=1),cn.view=!wn,cn.source=!!wn,l.d.x(0,1),ye(ln)&&ln(e,l,wn||0)}}};l.t=function(e,n,t,i){var r=yn(n[0]+(n[2]?" ("+n[2]+")":""),dn+"-t:"+e,n,t);return me(i)?i=oe:0>i&&(i=Be[g][z]+i),Be[w](r[0],Be[g][i]||oe),r[0]};for(Pe in $n)l.t[Pe]=$n[Pe],$n[Pe]=yn(hn[Pe][0]+(hn[Pe][2]?" ("+hn[Pe][2]+")":""),dn+"-t:"+Pe,hn[Pe],$n[Pe]),l.t[Pe].e=$n[Pe][0];l.f=function(e){return e=Me(e[k](/\r/g,"").split(_e)),e=e[k](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(e,n,t){return n===t?"":e}),e=e[k](/<code(\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(e,n,t){return"<code"+(n||"")+">"+t[k](/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")[k](/ /g,"&nbsp;")+"</code>"}),e=e[k](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(e,n,t,i){if(t=we(t),!ke("^("+gn+"|"+bn+")$")[_](t))return"";(i=i||"")&&(i=i[k](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(e,n,t){return ke("^("+pn+")$")[_](n)?e:""}));var r=/^(h[1-6]|th)$/[_](t),f=/^((fig)?caption)$/[_](t),s=n?"":i;return"b"===t||"strong"===t||r?"<"+n+"strong"+s+">"+(r&&n?je+je:""):"i"===t||"em"===t||f?"<"+n+"em"+s+">":ke("^("+gn+")$")[_](t)?"<"+n+t+s+">":ke("^("+bn+")$")[_](t)?je+je:""}),e=e[k](ke(Ue,"gi"),"</p><p$1>")[k](ke(De,"gi"),je)[k](/\n/g,je)[k](ke("(?:"+De+"){3,}","gi"),je+je)[k](ke("^(?:"+De+")+|(?:"+De+")+$","gi"),"")[k](ke("(?:"+De+"){2,}","gi"),"</p><p>")[k](ke(Fe,"gi"),""),e=e&&!ke("^"+Xe+"$","gi")[_](e)?"<p>"+e+"</p>":e,e=Ae(e),e[3]||""},kn(),Mn(),xn(Le,dn+" view"),o[m](O,ue),xn(Be,dn+"-tool"),xn(Ne,dn+"-view"),an&&xn(Le,"expand"),Ne[m](H,se),Ne[m](O,ue),Ne[m](D,o[D]||""),Ce(Ne,R,function(){l.is[R]=se,l.is[L]=ue,xn(Le,R)}),Ce(Ne,L,function(){l.is[R]=ue,l.is[L]=se,Mn(),mn(Le,R)}),Ce(Ne,T,function(){he(function(){kn();var e=Ne[u];Ne[u]="",en(e,0)},1)}),Ce(Ne,N,function(e){var s,n=e[ae],t=e[le],i=e[de],r=Le,f=zn(e);if(!n||t||"b"!==f&&66!==i)if(!n||t||"i"!==f&&73!==i)if(!n||t||"u"!==f&&85!==i)if(!n||t||"l"!==f&&76!==i){if(n&&t&&("x"===f||88===i)&&ln)$n.x[1](),e[A]();else if(!t&&("enter"===f||13===i))if(an&&(ge=Qe(),pe=Ve(),en(je,0),en(_e,1),e[A]()),an)ye(an)&&an(e,l,Ne);else{for(;r=r[h];)if("form"===we(r[$])){s=r;break}s&&(s.submit(),e[A]())}}else $n.a[1](),e[A]();else $n.u[1](),e[A]();else $n.i[1](),e[A]();else $n.b[1](),e[A]();ye(vn)&&vn(e,l,Ne),he(function(){var e=Ne[u][k](ke(_e,"g"),"");e&&e!==je||(Ne[u]=""),Mn()},1)});var Cn=o[h],Sn=be("a");return En(),l.container=Le,l.view=Ne,l.target=l.source=o,l.tool=Be,l.dialog=Te,l.config=Re,l.c=Ze,l.e=Ye,l.i=en,l.m=sn,l.n=fn,l.r=rn,l.s=tn,l.v=We,l.w=un,l[r]=En,l.destroy=Rn,l[R]=function(e){if(cn.view){var t=Ne[u];Ne[R](),l.$[1]&&rn(l.$[1]),l.is[R]=se,l.is[L]=ue,0===e?(Ne[u]="",en(t,1)):1===e?(Ne[u]="",en(t,0)):e===se&&(pe=n[G](),pe[V](Ne),ge=Qe(),ge[X](),ge[F](pe))}else cn.source&&(o[R](),0===e?on(o,0):1===e?on(o,o[M][z]):e===se&&o[B]());return l},l[L]=function(){return cn.view?(l.is[R]=ue,l.is[L]=se,Ne[L]()):cn.source&&o[L](),l},l.set=function(e,n){return e=l.f(e),(cn.view||1===n)&&(e=e[k](ke(Ie,"gi"),"")[k](ke(Ue,"gi"),je+je)),me(n)?cn.view?(Ne[u]=e,Mn()):cn.source?(o[M]=e,kn()):cn.d&&(Te[g][0][M]=e):0===n?(o[M]=e,kn()):1===n&&(Ne[u]=e,Mn()),l},l.get=function(e,n){if(me(n)){var t;return t=cn.source?o[M]:cn.d?Te[g][0][M]:o[M],t?t:e}return 0===n?o[M]||e:1===n?Ne[u]||e:void 0},l.disable=function(){return Ne[y](H),o[m](K,se),l},l.enable=function(){return Ne[m](H,se),o[y](K),ge},l})}(window,document,"RTE");