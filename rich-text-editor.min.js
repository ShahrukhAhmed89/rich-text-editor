/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.1.3
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,t,n){function ge(e){return t[r+"Element"](e)}function Me(e){return e.toLowerCase()}function Ne(e){return"string"==typeof e}function Ee(e){return 3===e.nodeType}function be(e){return"undefined"==typeof e}function Ce(e){return"function"==typeof e}function Oe(e,t){return new RegExp(e,t)}function Te(e,t){return t=t||"[\\w-:]+",e[C](Oe("<\\/"+t+">|<"+t+"(\\s[^<>]*?)?>","gi"),"")[C](/ +/g," ")[C](/^\s*|\s*$/g,"")}function Le(e,t){return e.join(t||"")}function ke(e,t,n){return e[u](t,n,ae)}function xe(e,t,n){return e[d](t,n)}function Se(e){var c,n=ge(ue),i=t[r+"DocumentFragment"](),o=[],l=[],s="";if(Ne(e)){for(n[f]=e;c=n[p];)l[x](Me(c[M]||"")),o[x](i[v](c));return[o,i,l,e]}for(l in e)(c=e[l])&&(Ne(c)?(s+=c,n[f]=c,c=n[p]):s+=c[a],o[x](Me(c[M]||"")),i[v](c));return[e,i,o,s]}var ye,we,i="__instance__",r="create",o="style",l="minHeight",c="HTML",f="inner"+c,a="outer"+c,s="className",c="EventListener",u="add"+c,d="remove"+c,c="Child",p="first"+c,v="append"+c,h="remove"+c,m="parentNode",y="children",w="childNodes",g="insertBefore",M="nodeName",c="Attribute",N="get"+c,E="set"+c,b="remove"+c,C="replace",O="value",T="length",L="indexOf",k="substring",x="push",S="preventDefault",q="click",A="focus",$="blur",B="select",D="keydown",R="paste",I="error",j="test",z="contenteditable",_="readonly",F="spellcheck",H="placeholder",U="getSelection",K="getRangeAt",X="rangeCount",G="addRange",J="removeAllRanges",P=r+"Range",c="Contents",Q="clone"+c,V="delete"+c,W=B+"Node",Y=W+c,Z="insertNode",ee="cloneRange",te="collapse",ne="setStart",ie="setEnd",re=ne+"Before",oe=ne+"After",le=ie+"Before",ce=ie+"After",fe=!0,ae=!1,se=null,ue="div",c="Key",de="ctrl"+c,pe="shift"+c,he="keyCode",me=setTimeout;!function(e){e.version="1.1.3",e[i]={},e.each=function(t,n){return me(function(){var r,n=e[i];for(r in n)t(n[r],r,n)},0===n?0:n||1),e},e.x="​"}(e[n]=function(c,u){function at(){return ye=e[U]&&e[U]()||{},ye[X]&&ye||se}function st(e){return ye=at(),ye&&ye[K](e||0)||se}function ut(e,t,n){if(e){if(ye=at()){var r,o,i=ge(ue);for(r=0,o=ye[X];o>r;++r)i[v](ye[K](r)[Q]());return e=Le(i[f].split(je)),e=be(t)||t?d.f(e):e,be(n)||n?e:e[C](Oe(Xe,"g"),"\n\n")[C](Oe(Ge,"g"),"")}return""}return at()+""}function dt(e,t){var r,o,l,c,n=ut(1,0,0),i=Se(n);if(i&&i[0][T]&&(we=st(),we[V](),we[Z](i[1])),i=i[0],e){for(l=0,c=i[T];c>l;++l)if(r=i[l],Me(r[M])===e)return r;return(be(t)||t)&&(l=mt(),o=vt(je+n),o=o&&o[0]&&o[0][m],o&&Me(o[M])===e&&o!==De)?(o[f]=Le(o[f].split(je)),n&&n!==o[f]?yt(l):gt([o]),o):se}return i[T]?i:se}function pt(e){return(we=st())&&(e=1===e?ae:0===e?fe:e,we[te](e)),we}function vt(e,t){if(Ye[A]){var n=Se(e);return(ye=at())&&(we=st(),we[V](),we[Z](n[1]),0===t?pt(1):1===t&&(vt(e,fe),pt(0)),ye[J](),ye[G](we)),n[0]}return se}function ht(t){try{var n=dt("a"),i=Te(ut(1,1,0),"a");t=Te(t[C](/^\s*javascript:/i,""));var o=t[0],l=e.location.hostname;return o=-1!=="/?&#"[L](o)||-1===t[L]("/"),!l||0!==t[L]("//"+l)&&-1===t[L]("://"+l)||(o=1),i||(vt(t,fe),i=t),t?(n?n[E]("href",t):n=vt('<a href="'+t+'">'+i+"</a>",fe)[0],o?(n[b]("rel"),n[b]("target")):(n[E]("rel","nofollow"),n[E]("target","_blank"))):(n&&(i=n[f],n[m][h](n)),n=vt(i,fe)[0]),n}catch(c){}return se}function mt(){var e,t,n;return(e=st())?(t=e[ee](),t[Y](De),t[ie](e.startContainer,e.startOffset),n=(t+"")[T],[n,n+(e+"")[T]]):se}function yt(n){if(n){var r,l,f,a,s,u,i=t[P](),o=0,c=[De];for(i[ne](De,0),i[te](fe);!u&&(a=c.pop());)if(Ee(a))l=o+a[T],!s&&n[0]>=o&&n[0]<=l&&(i[ne](a,n[0]-o),s=1),s&&n[1]>=o&&n[1]<=l&&(i[ie](a,n[1]-o),u=1),o=l;else for(f=a[w][T];f--;)c[x](a[w][f]);r=e[U](),r[J](),r[G](i)}}function wt(){return Se(ut(1,1,0))[0]}function gt(e,t){t=be(t)||!t;var n=e[0],i=e[e[T]-1];return ye=at(),we=st(),1===e[T]?we[t?Y:W](n):(we[t?oe:re](n),we[t?le:ce](i)),ye[J](),ye[G](we),e}function Mt(e,t,n){if(Ye[A]){be(t)&&(t=-1);var l,s,u,i=dt(e),r=ut(1,0,0),o=[];if(0===t||-1===t&&i){if(i){l=i[f],i[m][h](i);var d=Te(r,e),p=Te(l,e);if(-1!==p[L](d)&&d[T]<p[T])i=Oe("<"+e+"(\\s[^<>]*?)?>","i").exec(i[a]),i=i&&i[1]||"",r=Se([l[k](0,l[L](d)),d,l[k](l[L](d)+d[T])])[0],r[0]&&vt("<"+e+i+">"+(r[0][a]||r[0])+"</"+e+">",0),r[2]&&vt("<"+e+i+">"+(r[2][a]||r[2])+"</"+e+">",1),o=vt(r[1][a]||r[1],fe);else{if(o=Se(r),l=ge(ue),o&&o[2]&&(u=o[2][T]))for(s=0;u>s;++s)o[2][s]===e?l[f]+=o[0][s][f]:l[v](o[0][s]);o=vt(l[f],fe)}}}else(1===t||-1===t&&!i)&&(r=r&&r[C](Oe("(\\n|"+Ue+"){2,}","gi"),"</"+e+">"+Ie+Ie+"<"+e+">"),o=vt("<"+e+">"+(r||n||"")+"</"+e+">",fe));return o[0]||se}return se}function Nt(e,t){A in e&&(e.selectionStart=e.selectionEnd=be(t)?e[O][T]:t,e[A]())}function Et(e,t){var n=e[s];return Oe("(^|\\s)\\s*"+t+"\\s*(\\s|$)")[j](n)?e:(e[s]=Te(n+" "+t),e)}function bt(e,t){var n=Te(e[s][C](Oe("(^|\\s)\\s*"+t+"\\s*(\\s|$)","g"),"$1$2"));return n?e[s]=n:e[b]("class"),e}function Ct(e,t,n,i){function l(e){i.apply(this,[e,d,r]),Tt(),De[A](),Ce(tt)&&tt(e,d,De),e[S]()}var r=Et(ge("a"),t),o=n[1]||n[0];return 0===o[L]("svg:")&&(o=Ne+o.slice(4)+qe),r[f]="<span>"+o+"</span>",r.title=e,r.href="javascript:;",i&&(ke(r,"touchstart",l),ke(r,"mousedown",l)),[r,i]}function Ot(){De[f]=d.f(c[O])[C](Oe(Xe,"gi"),Ie+Ie)[C](Oe(Ge,"gi"),"")}function Tt(){var e=d.f(De[f]);Ae.tidy&&(e=e[C](Oe(Xe,"gi"),"</p>\n\n<p$1>")[C](Oe(_e,"gi"),Ie+"\n")),c[O]=e}function Lt(e){return Me(e.key||String.fromCharCode(e[he]))}function St(e){var t=e[de],n=e[pe],i=e[he],r=Lt(e);t&&n&&("x"===r||88===i)&&et?(ft.x[1](),e[S]()):n||"enter"!==r&&13!==i||Ce(Ze)&&Ze(e,d,c),Ce(tt)&&tt(e,d,c),me(function(){Ot(),yt(d.$[1])},1)}function qt(){if($e[m])return d;Et(c,nt+"-source"),ke(c,D,St),Ve=Ae.tools;for(We in Ve)if(We=Ve[We],ft[We]){if("x"===We&&!et)continue;Be[v](ft[We][0])}$e[v](De),kt&&"p"===Me(kt[M])&&(kt[g](xt,c),kt[m][g](c,kt),kt[m][h](kt)),c[m][g]($e,c),$e[v](c),$e[v](Be),Et(Re,nt+"-d"),Re[f]='<input type="text">',d.d.x();var e=Re[y][0];return e[E](F,ae),ke(e,q,function(){Ye[I]=ae,bt($e,I)}),ke(e,D,function(e){var t=this,n=e[de],i=e[pe],r=e[he],o=Lt(e);n||i||"enter"!==o&&13!==r?i||"escape"!==o&&27!==r&&(t[O][T]||"backspace"!==o&&8!==r)||(d.d.x(1,1),Qe=0,e[S]()):(d.d.x(1,1),Qe&&Qe(e,d,t),Qe=0,t[O]="",Ce(tt)&&tt(e,d,De),e[S]())}),$e[v](Re),d}function At(){return $e[m]?(kt&&($e[m][g](kt,$e),kt[g](c,xt),kt[h](xt)),c[o][l]="",c[N](o)||c[b](o),bt(c,nt+"-source"),xe(c,D,St),$e[m][h]($e),d):d}var Qe,Ve,We,d=this,p="⌘",ve="⇧",Ne='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',qe='"></path></svg>',Ae={classes:["rich-text-editor"],tags:["a|abbr|b|br|code|dfn|del|em|i|ins|kbd|mark|p|span|strong|u|var"],blocks:["article|aside|blockquote|figure|figcaption|figure|h[1-6]|header|div|li|[ou]l|p|pre|section|table|tr|th"],attributes:["class|data-[\\w-]+?|href|id|rel|style|target|title"],tools:["b","i","u","x"],text:{b:["Bold",Ne+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+qe,p+"+B"],i:["Italic",Ne+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+qe,p+"+I"],u:["Underline",Ne+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+qe,p+"+U"],a:["Link",Ne+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+qe,p+"+L"],x:["Source",Ne+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+qe,p+"+"+ve+"+X"]},tidy:1,enter:1,x:1,update:0},$e=ge(ue),Be=ge(ue),De=ge(ue),Re=ge(ue),Ie="<br>",je=e[n].x,ze="(\\s[^<>]*?)?",_e="<br"+ze+"\\s*\\/?>",Fe="<p"+ze+">",He="<\\/p>",ze="\\s*",Ue=ze+"(?:"+_e+")"+ze,Ke="^"+ze+Fe+"(?:"+Ue+")*"+ze+"|"+ze+"(?:"+Ue+")*"+He+ze+"$",Xe=ze+"(?:"+Ue+")*"+He+ze+Fe+"(?:"+Ue+")*"+ze,Ge=ze+"(?:"+Fe+"(?:"+Ue+")*|(?:"+Ue+")*"+He+")"+ze,Je=ze+Fe+"(?:"+Ue+")*"+ze+"(?:"+Ue+")*"+He+ze,Pe=ze+Fe+"(?:"+Ue+")*(?:[\\s\\S]*?)(?:"+Ue+")*"+He+ze;d.is={view:fe,source:ae,d:ae,e:function(e){var t=at()[A+"Node"];if(!t)return se;if(Ee(t)&&(t=t[m]),t===De){if((t=ut(1,1,0))&&-1!==Me(t)[L]("</"+e+">"))return vt(t,fe)[0]}else{if(t[M]&&Me(t[M])===e)return t;for(;t&&t!==De;){if(t[M]&&Me(t[M])===e)return t;t=t[m]}}return se},focus:ae,blur:fe,error:ae},u=u||{};for(We in Ae)be(u[We])||(Ae[We]=u[We]);var Ye=d.is,Ze=Ae.enter,et=Ae.x,tt=Ae.update,nt=Ae.classes[0],it=Ae.text||{},rt=Le(Ae.tags,"|"),ot=Le(Ae.attributes,"|"),lt=Le(Ae.blocks,"|"),ct=0,ft={b:function(){Mt("strong")},i:function(){Mt("em")},u:function(){Mt("u")},a:function(e){var n,i,t=Te(ut(1,1,0)).split(/\s/)[0];/^[a-z\d]+:\/\/\S+$/[j](t)?(dt("a")?Mt("a",0):ht(t),Tt()):Ye.d?d.d.x(1):((n=dt("a"))&&(i=n[N]("href")),ze="http://",d.d(ze,(i?i[C](/\/+$/,""):ze+Me(t))||"",function(e,t,n){ht(n[O]),Tt()}),me(function(){i&&Re[y][0][B]()},2))},x:function(e){if(et){var t=De.offsetHeight;t&&(c[o][l]=t+"px"),ct?(d.$[0]=mt(),Et($e,"view"),bt($e,"source"),De[A](),yt(d.$[1]),ct=0):(d.$[1]=mt(),Et($e,"source"),bt($e,"view"),c[A](),yt(d.$[0]),ct=1),Ye.view=!ct,Ye.source=!!ct,d.d.x(0,1),Ce(et)&&et(e,d,ct||0)}}};d.$=[se,se],d.$$=function(e,t){var n=[at(),st(t)];return be(e)?n:n[e]},d.d=function(e,t,n){var i=Re[y][0];return i[H]=e,i[O]=t,me(function(){Nt(i)},1),Qe=n,d.d.v(1),d},d.d.x=function(e,t){var n=Re[y][0],i=n[O];return i&&!t?(Et($e,I),Ye[I]=fe,Ye.d=fe,me(function(){Ye[A]=ae,Ye[$]=fe,n[A](),n[B]()},1)):(bt($e,"d"),bt($e,I),Ye.d=ae),Ye[A]=fe,Ye[$]=ae,e&&(d[A](),yt(d.$[1])),d},d.d.v=function(e){return Et($e,"d"),bt($e,I),Ye[I]=ae,Ye.d=fe,d.$[1]=e?mt():se,d},e[n][i][c.id||c.name||Object.keys(e[n][i])[T]]=d,d.t=function(e,t,n,i){var r=Ct(t[0]+(t[2]?" ("+t[2]+")":""),nt+"-t:"+e,t,n);return be(i)?i=se:0>i&&(i=Be[y][T]+i),Be[g](r[0],Be[y][i]||se),d.t[e]=r[1],d.t[e].e=r[0]};for(We in ft)d.t[We]=ft[We],ft[We]=Ct(it[We][0]+(it[We][2]?" ("+it[We][2]+")":""),nt+"-t:"+We,it[We],ft[We]),d.t[We].e=ft[We][0];d.f=function(e){return e=Le(e[C](/\r/g,"").split(je)),e=e[C](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(e,t,n){return t===n?"":e}),e=e[C](/<code(\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(e,t,n){return"<code"+(t||"")+">"+n[C](/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")[C](/ /g,"&nbsp;")+"</code>"}),e=e[C](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(e,t,n,i){if(n=Me(n),!Oe("^("+rt+"|"+lt+")$")[j](n))return"";(i=i||"")&&(i=i[C](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(e,t,n){return Oe("^("+ot+")$")[j](t)?e:""}));var r=/^(h[1-6]|th)$/[j](n),o=/^((fig)?caption)$/[j](n),l=t?"":i;return"b"===n||"strong"===n||r?"<"+t+"strong"+l+">"+(r&&t?Ie+Ie:""):"i"===n||"em"===n||o?"<"+t+"em"+l+">":Oe("^("+rt+")$")[j](n)?"<"+t+n+l+">":Oe("^("+lt+")$")[j](n)?Ie+Ie:""}),e=e[C](Oe(Xe,"gi"),"</p><p$1>")[C](Oe(Ue,"gi"),Ie)[C](/\n/g,Ie)[C](Oe("(?:"+Ue+"){3,}","gi"),Ie+Ie)[C](Oe("^(?:"+Ue+")+|(?:"+Ue+")+$","gi"),"")[C](Oe("(?:"+Ue+"){2,}","gi"),"</p><p>")[C](Oe(Je,"gi"),""),e=e&&!Oe("^"+Pe+"$","gi")[j](e)?"<p>"+e+"</p>":e,e=Se(e),e[3]||""},Ot(),Tt(),Et($e,nt+" view"),c[E](F,ae),Et(Be,nt+"-tool"),Et(De,nt+"-view"),Ze&&Et($e,"expand"),De[E](z,fe),De[E](F,ae),De[E](H,c[H]||""),ke(De,A,function(){Ye[A]=fe,Ye[$]=ae,Et($e,A)}),ke(De,$,function(){Ye[A]=ae,Ye[$]=fe,Tt(),bt($e,A)}),ke(De,R,function(){me(function(){Ot();var e=De[f];De[f]="",vt(e,0)},1)}),ke(De,D,function(e){var l,t=e[de],n=e[pe],i=e[he],r=$e,o=Lt(e);if(!t||n||"b"!==o&&66!==i)if(!t||n||"i"!==o&&73!==i)if(!t||n||"u"!==o&&85!==i)if(!t||n||"l"!==o&&76!==i){if(t&&n&&("x"===o||88===i)&&et)ft.x[1](),e[S]();else if(!n&&("enter"===o||13===i))if(Ze&&(ye=at(),we=st(),vt(Ie,0),vt(je,1),e[S]()),Ze)Ce(Ze)&&Ze(e,d,De);else{for(;r=r[m];)if("form"===Me(r[M])){l=r;break}l&&(l.submit(),e[S]())}}else ft.a[1](),e[S]();else ft.u[1](),e[S]();else ft.i[1](),e[S]();else ft.b[1](),e[S]();Ce(tt)&&tt(e,d,De),me(function(){var e=De[f][C](Oe(je,"g"),"");e&&e!==Ie||(De[f]=""),Tt()},1)});var kt=c[m],xt=ge("a");return qt(),d.config=Ae,d.container=$e,d.view=De,d.source=d.target=c,d.tool=Be,d.dialog=Re,d.c=pt,d.e=dt,d.g=Se,d.i=vt,d.m=gt,d.n=wt,d.r=yt,d.s=mt,d.v=ut,d.w=Mt,d[r]=qt,d.destroy=At,d[A]=function(e){if(Ye.view){var n=De[f];De[A](),d.$[1]&&yt(d.$[1]),Ye[A]=fe,Ye[$]=ae,0===e?(De[f]="",vt(n,1)):1===e?(De[f]="",vt(n,0)):e===fe&&(we=t[P](),we[Y](De),ye=at(),ye[J](),ye[G](we))}else Ye.source&&(c[A](),0===e?Nt(c,0):1===e?Nt(c,c[O][T]):e===fe&&c[B]());return d},d[$]=function(){return Ye.view?(Ye[A]=ae,Ye[$]=fe,De[$]()):Ye.source&&c[$](),d},d.set=function(e,t){return e=d.f(e),(Ye.view||1===t)&&(e=e[C](Oe(Ke,"gi"),"")[C](Oe(Xe,"gi"),Ie+Ie)),be(t)?Ye.view?(De[f]=e,Tt()):Ye.source?(c[O]=e,Ot()):Ye.d&&(Re[y][0][O]=e):0===t?(c[O]=e,Ot()):1===t&&(De[f]=e,Tt()),d},d.get=function(e,t){if(be(t)){var n;return n=Ye.source?c[O]:Ye.d?Re[y][0][O]:c[O],n?n:e}return 0===t?c[O]||e:1===t?De[f]||e:void 0},d.disable=function(){return De[b](z),c[E](_,fe),d},d.enable=function(){return De[E](z,fe),c[b](_),ye},d})}(window,document,"RTE");