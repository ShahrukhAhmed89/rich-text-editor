/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.1.2
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,n,t){function be(e){return n[r+"Element"](e)}function we(e){return e.toLowerCase()}function $e(e){return"string"==typeof e}function xe(e){return 3===e.nodeType}function me(e){return"undefined"==typeof e}function ye(e){return"function"==typeof e}function ke(e,n){return new RegExp(e,n)}function Me(e,n){return e.join(n||"")}function ze(e,n){return n=n||"[\\w-:]+",e[k](ke("<\\/"+n+">|<"+n+"(\\s[^<>]*?)?>","gi"),"")[k](/ +/g," ")[k](/^\s*|\s*$/g,"")}function Ce(e,n,t){return e[a](n,t,ue)}function Se(e,n,t){return e[l](n,t)}function Ae(e){var c,t=be(ce),i=n[r+"DocumentFragment"](),f=[],s=[],a="";if($e(e)){for(t[u]=e;c=t[b];)s.push(we(c[$]||"")),f.push(i[v](c));return[f,i,s,e]}for(s in e)c=e[s],$e(c)?(a+=c,t[u]=c,c=t[b]):a+=c[o],f.push(we(c[$]||"")),i[v](c);return[e,i,f,a]}var ge,pe,i="__instance__",r="create",f="style",s="minHeight",u="innerHTML",o="outerHTML",c="className",a="addEventListener",l="removeEventListener",v="appendChild",d="removeChild",h="parentNode",g="children",p="childNodes",b="firstChild",w="insertBefore",$="nodeName",x="getAttribute",m="setAttribute",y="removeAttribute",k="replace",M="value",z="length",C="indexOf",S="substring",A="preventDefault",E="click",L="focus",R="blur",B="select",N="keydown",T="paste",j="error",H="test",_="contenteditable",K="readonly",O="spellcheck",D="placeholder",I="getSelection",U="getRangeAt",q="rangeCount",F="addRange",X="removeAllRanges",G=r+"Range",J="cloneContents",P="deleteContents",Q=B+"Node",V=Q+"Contents",W="insertNode",Y="cloneRange",Z="collapse",ee="setStart",ne="setEnd",te=ee+"Before",ie=ee+"After",re=ne+"Before",fe=ne+"After",se=!0,ue=!1,oe=null,ce="div",ae="ctrlKey",le="shiftKey",de="keyCode",he=setTimeout;!function(e){e.version="1.1.2",e[i]={},e.each=function(n,t){return he(function(){var r,t=e[i];for(r in t)n(t[r],r,t)},0===t?0:t||1),e},e.x="​"}(e[t]=function(a,l){function Ve(){return ge=e[I]&&e[I]()||{},ge[q]&&ge||oe}function We(e){return ge=Ve(),ge&&ge[U](e||0)||oe}function Ye(e,n,t){if(e){if(ge=Ve()){var r,f,i=be(ce);for(r=0,f=ge[q];f>r;++r)i[v](ge[U](r)[J]());return e=Me(i[u].split(_e)),e=me(n)||n?b.f(e):e,me(t)||t?e:e[k](ke(qe,"g"),"\n\n")[k](ke(Fe,"g"),"")}return""}return Ve()+""}function Ze(e,n){var r,f,s,o,t=Ye(1,0,0),i=Ae(t);if(i&&i[0][z]&&(pe=We(),pe[P](),pe[W](i[1])),i=i[0],e){for(s=0,o=i[z];o>s;++s)if(r=i[s],we(r[$])===e)return r;return(me(n)||n)&&(s=rn(),f=nn(_e+t),f=f&&f[0]&&f[0][h],f&&we(f[$])===e&&f!==Te)?(f[u]=Me(f[u].split(_e)),t&&t!==f[u]?fn(s):un([f]),f):oe}return i[z]?i:oe}function en(e){return(pe=We())&&(e=1===e?ue:0===e?se:e,pe[Z](e)),pe}function nn(e,n){if(b.is[L]){var t=Ae(e);return(ge=Ve())&&(pe=We(),pe[P](),pe[W](t[1]),0===n?en(1):1===n&&(nn(e,se),en(0)),ge[X](),ge[F](pe)),t[0]}return oe}function tn(n){try{var t=Ze("a"),i=ze(Ye(1,1,0),"a");n=ze(n[k](/^\s*javascript:/i,""));var f=n[0],s=e.location.hostname;return f=-1!=="/?&#"[C](f)||-1===n[C]("/"),!s||0!==n[C]("//"+s)&&-1===n[C]("://"+s)||(f=1),n?(t?t[m]("href",n):t=nn('<a href="'+n+'">'+i+"</a>",se)[0],f?(t[y]("rel"),t[y]("target")):(t[m]("rel","nofollow"),t[m]("target","blank"))):(t&&(i=t[u],t[h][d](t)),t=nn(i,se)[0]),t}catch(o){}return oe}function rn(){var e,n,t;return(e=We())?(n=e[Y](),n[V](Te),n[ne](e.startContainer,e.startOffset),t=(n+"")[z],[t,t+(e+"")[z]]):oe}function fn(t){if(t){var r,s,o,c,a,l,i=n[G](),f=0,u=[Te];for(i[ee](Te,0),i[Z](se);!l&&(c=u.pop());)if(xe(c))s=f+c[z],!a&&t[0]>=f&&t[0]<=s&&(i[ee](c,t[0]-f),a=1),a&&t[1]>=f&&t[1]<=s&&(i[ne](c,t[1]-f),l=1),f=s;else for(o=c[p][z];o--;)u.push(c[p][o]);r=e[I](),r[X](),r[F](i)}}function sn(){return Ae(Ye(1,1,0))[0]}function un(e,n){n=me(n)||!n;var t=e[0],i=e[e[z]-1];return ge=Ve(),pe=We(),1===e[z]?pe[n?V:Q](t):(pe[n?ie:te](t),pe[n?re:fe](i)),ge[X](),ge[F](pe),e}function on(e,n,t){if(b.is[L]){me(n)&&(n=-1);var s,c,a,l,i=Ze(e),r=Ye(1,0,0),f=[];if(0===n||-1===n&&i){if(i){s=i[u],i[h][d](i);var g=ze(r),p=ze(s);if(-1!==p[C](g)&&g[z]<p[z])i=ke("<"+e+"(\\s[^<>]*?)?>","i").exec(i[o]),i=i&&i[1]||"",c=s[S](0,s[C](g)),c&&nn("<"+e+i+">"+c+"</"+e+">",0),c=s[S](s[C](g)+g[z]),c&&nn("<"+e+i+">"+c+"</"+e+">",1),f=nn(g,se);else{if(f=Ae(r),s=be(ce),f&&f[2]&&(l=f[2][z]))for(a=0;l>a;++a)f[2][a]===e?s[u]+=f[0][a][u]:s[v](f[0][a]);f=nn(s[u],se)}}}else(1===n||-1===n&&!i)&&(r=r&&r[k](ke("(\\n|"+Ie+"){2,}","gi"),"</"+e+">"+He+He+"<"+e+">"),f=nn("<"+e+">"+(r||t||"")+"</"+e+">",se));return f[0]||oe}return oe}function cn(e,n){L in e&&(e.selectionStart=e.selectionEnd=me(n)?e[M][z]:n,e[L]())}function mn(e,n){var t=e[c];return ke("(^|\\s)\\s*"+n+"\\s*(\\s|$)")[H](t)?e:(e[c]=ze(t+" "+n),e)}function yn(e,n){var t=ze(e[c][k](ke("(^|\\s)\\s*"+n+"\\s*(\\s|$)","g"),"$1$2"));return t?e[c]=t:e[y]("class"),e}function kn(e,n,t,i){function s(e){i.apply(this,[e,b,r]),zn(),Te[L](),ye(dn)&&dn(e,b,Te),e[A]()}var r=mn(be("a"),n),f=t[1]||t[0];return 0===f[C]("svg:")&&(f=Ee+f.slice(4)+Le),r[u]="<span>"+f+"</span>",r.title=e,r.href="javascript:;",i&&(Ce(r,"touchstart",s),Ce(r,"mousedown",s)),[r,i]}function Mn(){Te[u]=b.f(a[M])[k](ke(qe,"gi"),He+He)[k](ke(Fe,"gi"),"")}function zn(){var e=b.f(Te[u]);Re.tidy&&(e=e[k](ke(qe,"gi"),"</p>\n\n<p$1>")[k](ke(Ke,"gi"),He+"\n")),a[M]=e}function Cn(e){return we(e.key||String.fromCharCode(e[de]))}function En(e){var n=e[ae],t=e[le],i=e[de],r=Cn(e);n&&t&&("x"===r||88===i)&&vn?(xn.x[1](),e[A]()):t||"enter"!==r&&13!==i||ye(ln)&&ln(e,b,a),ye(dn)&&dn(e,b,a),he(function(){Mn(),fn(b.$[1])},1)}function Ln(){if(Be[h])return b;mn(a,hn+"-source"),Ce(a,N,En),Pe=Re.tools;for(Qe in Pe)if(Qe=Pe[Qe],xn[Qe]){if("x"===Qe&&!vn)continue;Ne[v](xn[Qe][0])}Be[v](Te),Sn&&"p"===we(Sn[$])&&(Sn[w](An,a),Sn[h][w](a,Sn),Sn[h][d](Sn)),a[h][w](Be,a),Be[v](a),Be[v](Ne),mn(je,hn+"-d"),je[u]='<input type="text">',b.d.x();var e=je[g][0];return e[m](O,ue),Ce(e,E,function(){b.is[j]=ue,yn(Be,j)}),Ce(e,N,function(e){var n=this,t=e[ae],i=e[le],r=e[de],f=Cn(e);t||i||"enter"!==f&&13!==r?i||"escape"!==f&&27!==r&&(n[M][z]||"backspace"!==f&&8!==r)||(b.d.x(1,1),Je=0,e[A]()):(b.d.x(1,1),Je&&Je(e,b,n),Je=0,n[M]="",ye(dn)&&dn(e,b,Te),e[A]())}),Be[v](je),b}function Rn(){return Be[h]?(Sn&&(Be[h][w](Sn,Be),Sn[w](a,An),Sn[d](An)),a[f][s]="",a[x](f)||a[y](f),yn(a,hn+"-source"),Se(a,N,En),Be[h][d](Be),b):b}var Je,Pe,Qe,b=this,ve="⌘",$e="⇧",Ee='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',Le='"></path></svg>',Re={classes:["rich-text-editor"],tags:["a|abbr|b|br|code|dfn|del|em|i|ins|kbd|mark|p|span|strong|u|var"],blocks:["article|aside|blockquote|figure|figcaption|figure|h[1-6]|header|div|li|[ou]l|p|pre|section|table|tr|th"],attributes:["class|data-[\\w-]+?|href|id|rel|style|target|title"],tools:["b","i","u","x"],text:{b:["Bold",Ee+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+Le,ve+"+B"],i:["Italic",Ee+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+Le,ve+"+I"],u:["Underline",Ee+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+Le,ve+"+U"],a:["Link",Ee+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+Le,ve+"+L"],x:["Source",Ee+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+Le,ve+"+"+$e+"+X"]},tidy:1,enter:1,x:1,update:0},Be=be(ce),Ne=be(ce),Te=be(ce),je=be(ce),He="<br>",_e=e[t].x,Ke="<br(\\s[^<>]*?)?\\s*\\/?>",Oe="<p(\\s[^<>]*?)?>",De="<\\/p>",Ie="\\s*(?:"+Ke+")\\s*",Ue="^\\s*"+Oe+"(?:"+Ie+")*\\s*|\\s*(?:"+Ie+")*"+De+"\\s*$",qe="\\s*(?:"+Ie+")*"+De+"\\s*"+Oe+"(?:"+Ie+")*\\s*",Fe="\\s*(?:"+Oe+"(?:"+Ie+")*|(?:"+Ie+")*"+De+")\\s*",Xe="\\s*"+Oe+"(?:"+Ie+")*\\s*(?:"+Ie+")*"+De+"\\s*",Ge="\\s*"+Oe+"(?:"+Ie+")*(?:[\\s\\S]*?)(?:"+Ie+")*"+De+"\\s*";b.$=[oe,oe],b.$$=function(e,n){var t=[Ve(),We(n)];return me(e)?t:t[e]},b.d=function(e,n,t){var i=je[g][0];return i[D]=e,i[M]=n,he(function(){cn(i)},1),Je=t,b.d.v(1),b},b.d.x=function(e,n){var t=je[g][0],i=t[M];return i&&!n?(mn(Be,j),an[j]=se,an.d=se,he(function(){b.is[L]=ue,b.is[R]=se,t[L](),t[B]()},1)):(yn(Be,"d"),yn(Be,j),an.d=ue),b.is[L]=se,b.is[R]=ue,e&&(b[L](),fn(b.$[1])),b},b.d.v=function(e){return mn(Be,"d"),yn(Be,j),b.is[j]=ue,an.d=se,b.$[1]=e?rn():oe,b},e[t][i][a.id||a.name||Object.keys(e[t][i])[z]]=b,l=l||{};for(Qe in Re)me(l[Qe])||(Re[Qe]=l[Qe]);b.is={view:se,source:ue,d:ue,e:function(e){b.$[1]=rn();var n=Ze(e);return fn(b.$[1]),n?se:ue},focus:ue,blur:se,error:ue};var an=b.is,ln=Re.enter,vn=Re.x,dn=Re.update,hn=Re.classes[0],gn=Re.text||{},pn=Me(Re.tags,"|"),bn=Me(Re.attributes,"|"),wn=Me(Re.blocks,"|"),$n=0,xn={b:function(){on("strong")},i:function(){on("em")},u:function(){on("u")},a:function(e){var t,i,n=ze(Ye(1,1,0))[k](/\s+/g,"%20");/^[a-z\d]+:\/\/\S+$/[H](n)?Ze("a")?on("a",0):tn(n):an.d?b.d.x(1):((t=Ze("a"))&&(i=t[x]("href")),b.d("http://",(i?i[k](/\/+$/,""):"http://"+we(n))||"",function(e,n,t){tn(t[M])}),he(function(){i&&je[g][0][B]()},2))},x:function(e){if(vn){var n=Te.offsetHeight;n&&(a[f][s]=n+"px"),$n?(b.$[0]=rn(),mn(Be,"view"),yn(Be,"source"),Te[L](),fn(b.$[1]),$n=0):(b.$[1]=rn(),mn(Be,"source"),yn(Be,"view"),a[L](),fn(b.$[0]),$n=1),an.view=!$n,an.source=!!$n,b.d.x(0,1),ye(vn)&&vn(e,b,$n||0)}}};b.t=function(e,n,t,i){var r=kn(n[0]+(n[2]?" ("+n[2]+")":""),hn+"-t:"+e,n,t);return me(i)?i=oe:0>i&&(i=Ne[g][z]+i),Ne[w](r[0],Ne[g][i]||oe),r[0]};for(Qe in xn)b.t[Qe]=xn[Qe],xn[Qe]=kn(gn[Qe][0]+(gn[Qe][2]?" ("+gn[Qe][2]+")":""),hn+"-t:"+Qe,gn[Qe],xn[Qe]),b.t[Qe].e=xn[Qe][0];b.f=function(e){return e=Me(e[k](/\r/g,"").split(_e)),e=e[k](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(e,n,t){return n===t?"":e}),e=e[k](/<code(\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(e,n,t){return"<code"+(n||"")+">"+t[k](/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")[k](/ /g,"&nbsp;")+"</code>"}),e=e[k](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(e,n,t,i){if(t=we(t),!ke("^("+pn+"|"+wn+")$")[H](t))return"";(i=i||"")&&(i=i[k](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(e,n,t){return ke("^("+bn+")$")[H](n)?e:""}));var r=/^(h[1-6]|th)$/[H](t),f=/^((fig)?caption)$/[H](t),s=n?"":i;return"b"===t||"strong"===t||r?"<"+n+"strong"+s+">"+(r&&n?He+He:""):"i"===t||"em"===t||f?"<"+n+"em"+s+">":ke("^("+pn+")$")[H](t)?"<"+n+t+s+">":ke("^("+wn+")$")[H](t)?He+He:""}),e=e[k](ke(qe,"gi"),"</p><p$1>")[k](ke(Ie,"gi"),He)[k](/\n/g,He)[k](ke("(?:"+Ie+"){3,}","gi"),He+He)[k](ke("^(?:"+Ie+")+|(?:"+Ie+")+$","gi"),"")[k](ke("(?:"+Ie+"){2,}","gi"),"</p><p>")[k](ke(Xe,"gi"),""),e=e&&!ke("^"+Ge+"$","gi")[H](e)?"<p>"+e+"</p>":e,e=Ae(e),e[3]||""},Mn(),zn(),mn(Be,hn+" view"),a[m](O,ue),mn(Ne,hn+"-tool"),mn(Te,hn+"-view"),ln&&mn(Be,"expand"),Te[m](_,se),Te[m](O,ue),Te[m](D,a[D]||""),Ce(Te,L,function(){b.is[L]=se,b.is[R]=ue,mn(Be,L)}),Ce(Te,R,function(){b.is[L]=ue,b.is[R]=se,zn(),yn(Be,L)}),Ce(Te,T,function(){he(function(){Mn();var e=Te[u];Te[u]="",nn(e,0)},1)}),Ce(Te,N,function(e){var s,n=e[ae],t=e[le],i=e[de],r=Be,f=Cn(e);if(!n||t||"b"!==f&&66!==i)if(!n||t||"i"!==f&&73!==i)if(!n||t||"u"!==f&&85!==i)if(!n||t||"l"!==f&&76!==i){if(n&&t&&("x"===f||88===i)&&vn)xn.x[1](),e[A]();else if(!t&&("enter"===f||13===i))if(ln&&(ge=Ve(),pe=We(),nn(He,0),nn(_e,1),e[A]()),ln)ye(ln)&&ln(e,b,Te);else{for(;r=r[h];)if("form"===we(r[$])){s=r;break}s&&(s.submit(),e[A]())}}else xn.a[1](),e[A]();else xn.u[1](),e[A]();else xn.i[1](),e[A]();else xn.b[1](),e[A]();ye(dn)&&dn(e,b,Te),he(function(){var e=Te[u][k](ke(_e,"g"),"");e&&e!==He||(Te[u]=""),zn()},1)});var Sn=a[h],An=be("a");return Ln(),b.container=Be,b.view=Te,b.target=b.source=a,b.tool=Ne,b.dialog=je,b.config=Re,b.c=en,b.e=Ze,b.i=nn,b.m=un,b.n=sn,b.r=fn,b.s=rn,b.v=Ye,b.w=on,b[r]=Ln,b.destroy=Rn,b[L]=function(e){if(an.view){var t=Te[u];Te[L](),b.$[1]&&fn(b.$[1]),b.is[L]=se,b.is[R]=ue,0===e?(Te[u]="",nn(t,1)):1===e?(Te[u]="",nn(t,0)):e===se&&(pe=n[G](),pe[V](Te),ge=Ve(),ge[X](),ge[F](pe))}else an.source&&(a[L](),0===e?cn(a,0):1===e?cn(a,a[M][z]):e===se&&a[B]());return b},b[R]=function(){return an.view?(b.is[L]=ue,b.is[R]=se,Te[R]()):an.source&&a[R](),b},b.set=function(e,n){return e=b.f(e),(an.view||1===n)&&(e=e[k](ke(Ue,"gi"),"")[k](ke(qe,"gi"),He+He)),me(n)?an.view?(Te[u]=e,zn()):an.source?(a[M]=e,Mn()):an.d&&(je[g][0][M]=e):0===n?(a[M]=e,Mn()):1===n&&(Te[u]=e,zn()),b},b.get=function(e,n){if(me(n)){var t;return t=an.source?a[M]:an.d?je[g][0][M]:a[M],t?t:e}return 0===n?a[M]||e:1===n?Te[u]||e:void 0},b.disable=function(){return Te[y](_),a[m](K,se),b},b.enable=function(){return Te[m](_,se),a[y](K),ge},b})}(window,document,"RTE");