/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.1.0
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,n,i){function ge(e){return n[r+"Element"](e)}function pe(e){return e.toLowerCase()}function be(e){return"string"==typeof e}function we(e){return 3===e.nodeType}function $e(e){return"undefined"==typeof e}function xe(e){return"function"==typeof e}function me(e,n){return new RegExp(e,n)}function ye(e,n){return e.join(n||"")}function ke(e,n,i){return e[c](n,i,fe)}function ze(e,n,i){return e[a](n,i)}function Me(e){var f,i=ge("div"),t=n[r+"DocumentFragment"](),s=[];if(be(e)){for(i[u]=e;f=i[p];)s.push(t[l](f));return[s,t]}for(f in e)f=e[f],be(f)&&(i[u]=f,f=i[p]),t[l](f);return[e,t]}var de,he,t="__instance__",r="create",s="style",f="minHeight",u="innerHTML",o="className",c="addEventListener",a="removeEventListener",l="appendChild",v="removeChild",d="parentNode",h="children",g="childNodes",p="firstChild",b="insertBefore",w="nodeName",$="getAttribute",x="setAttribute",m="removeAttribute",y="replace",k="value",z="length",M="indexOf",C="substring",S="preventDefault",A="click",E="focus",R="blur",N="select",L="keydown",B="paste",j="error",_="test",T="contenteditable",H="readonly",K="spellcheck",O="placeholder",D="getSelection",I="getRangeAt",U="rangeCount",F="addRange",X="removeAllRanges",q=r+"Range",P="cloneContents",V="deleteContents",G=N+"Node",J=G+"Contents",Q="insertNode",W="cloneRange",Y="collapse",Z="setStart",ee="setEnd",ne=Z+"Before",ie=Z+"After",te=ee+"Before",re=ee+"After",se=!0,fe=!1,ue=null,oe="ctrlKey",ce="shiftKey",le="keyCode",ve=setTimeout;!function(e){e.version="1.1.0",e[t]={},e.each=function(n,i){return ve(function(){var r,i=e[t];for(r in i)n(i[r],r,i)},0===i?0:i||1),e},e.x="​"}(e[i]=function(c,a){function Ve(){return de=e[D]&&e[D]()||{},de[U]&&de||ue}function Ge(e){return de=Ve(),de&&de[I](e||0)||ue}function Je(e,n,i){if(e){if(de=Ve()){var r,s,t=ge("div");for(r=0,s=de[U];s>r;++r)t[l](de[I](r)[P]());return e=ye(t[u].split(je)),e=$e(n)||n?p.f(e):e,$e(i)||i?e:e[y](me(De,"g"),"\n\n")[y](me(Ie,"g"),"")}return""}return Ve()+""}function Qe(e,n){var r,s,f,o,i=Je(1,0),t=Me(i);if(t&&t[0][z]&&(he=Ge(),he[V](),he[Q](t[1])),t=t[0],e){for(f=0,o=t[z];o>f;++f)if(r=t[f],pe(r[w])===e)return r;return($e(n)||n)&&(f=en(),s=Ye(je+i),s=s&&s[0]&&s[0][d],s&&pe(s[w])===e&&s!==Ne)?(s[u]=ye(s[u].split(je)),i&&i!==s[u]?nn(f):rn([s]),s):ue}return t[z]?t:ue}function We(e){return(he=Ge())&&(e=1===e?fe:0===e?se:e,he[Y](e)),he}function Ye(e,n){if(p.is[E]){var i=Me(e);return(de=Ve())&&(he=Ge(),he[V](),he[Q](i[1]),0===n?We(1):1===n&&(Ye(e,se),We(0)),de[X](),de[F](he)),i[0]}return ue}function Ze(n){try{var i=Qe("a"),t=Je(1,1,0)[y](/<a(\s[^<>]*?)?>|<\/a>/g,"");n=n[y](/^\s*javascript:/i,"");var s=n[0],f=e.location.hostname;return s=-1!=="/?&#"[M](s)||-1===n[M]("/"),!f||0!==n[M]("//"+f)&&-1===n[M]("://"+f)||(s=1),n?(i?i[x]("href",n):i=Ye('<a href="'+n+'">'+t+"</a>",se)[0],s?(i[m]("rel"),i[m]("target")):(i[x]("rel","nofollow"),i[x]("target","blank"))):(i&&(t=i[u],i[d][v](i)),i=Ye(t,se)[0]),i}catch(o){}return ue}function en(){var e,n,i;return(e=Ge())?(n=e[W](),n[J](Ne),n[ee](e.startContainer,e.startOffset),i=(n+"")[z],[i,i+(e+"")[z]]):ue}function nn(i){if(i){var r,f,o,c,a,l,t=n[q](),s=0,u=[Ne];for(t[Z](Ne,0),t[Y](se);!l&&(c=u.pop());)if(we(c))f=s+c[z],!a&&i[0]>=s&&i[0]<=f&&(t[Z](c,i[0]-s),a=1),a&&i[1]>=s&&i[1]<=f&&(t[ee](c,i[1]-s),l=1),s=f;else for(o=c[g][z];o--;)u.push(c[g][o]);r=e[D](),r[X](),r[F](t)}}function tn(){return Me(Je(1,1,0))[0]}function rn(e,n){n=$e(n)||!n;var i=e[0],t=e[e[z]-1];return de=Ve(),he=Ge(),1===e[z]?he[n?J:G](i):(he[n?ie:ne](i),he[n?te:re](t)),de[X](),de[F](he),e}function sn(e,n,i){if(p.is[E]){$e(n)&&(n=-1);var o,c,t="<"+e+"(?:\\s[^<>]*?)?>|<\\/"+e+">",r=Qe(e),s=Je(1,1,0),f=[];if(s=s[y](me("(\\n|"+Ke+"){2,}","gi"),"</"+e+">"+Be+Be+"<"+e+">"),0===n||-1===n&&r){if(r){o=r[u],r[d][v](r);var a=s[y](me(t,"g"),"");-1!==o[M](a)&&s[z]<o[z]?(c=o[C](0,o[M](a)),c&&Ye("<"+e+">"+c+"</"+e+">",0),c=o[C](o[M](a)+a[z]),c&&Ye("<"+e+">"+c+"</"+e+">",1),f=Ye(a,se)):(s=s[y](me("^"+t+"$","g"),""),f=Ye(s,se))}}else(1===n||-1===n&&!r)&&(f=Ye("<"+e+">"+(s||i||"")+"</"+e+">",se));return f[0]||ue}return ue}function fn(e,n){E in e&&(e.selectionStart=e.selectionEnd=$e(n)?e[k][z]:n,e[E]())}function wn(e,n){var i=e[o];return me("(^|\\s)\\s*"+n+"\\s*(\\s|$)")[_](i)?e:(e[o]=i+" "+n,e)}function $n(e,n){var i=e[o][y](me("(^|\\s)\\s*"+n+"\\s*(\\s|$)","g"),"$1$2");return i?e[o]=i[y](/^\s*|\s*$/g,""):e[m]("class"),e}function xn(e,n,i,t){function f(e){t.apply(this,[e,p,r]),yn(),Ne[E](),xe(an)&&an(e,p,Ne),e[S]()}var r=wn(ge("a"),n),s=i[1]||i[0];return 0===s[M]("svg:")&&(s=Ce+s.slice(4)+Se),r[u]="<span>"+s+"</span>",r.title=e,r.href="javascript:;",t&&(ke(r,"touchstart",f),ke(r,"mousedown",f)),[r,t]}function mn(){Ne[u]=p.f(c[k])[y](me(De,"gi"),Be+Be)[y](me(Ie,"gi"),"")}function yn(){var e=p.f(Ne[u]);Ae.tidy&&(e=e[y](me(De,"gi"),"</p>\n\n<p$1>")[y](me(_e,"gi"),Be+"\n")),c[k]=e}function kn(e){return pe(e.key||String.fromCharCode(e[le]))}function Cn(e){var n=e[oe],i=e[ce],t=e[le],r=kn(e);n&&i&&("x"===r||88===t)&&cn?(bn.x[1](),e[S]()):i||"enter"!==r&&13!==t||xe(on)&&on(e,p,c),xe(an)&&an(e,p,c),ve(mn,1)}function Sn(){if(Ee[d])return p;wn(c,ln+"-source"),ke(c,L,Cn),qe=Ae.tools;for(Pe in qe)if(Pe=qe[Pe],bn[Pe]){if("x"===Pe&&!cn)continue;Re[l](bn[Pe][0])}Ee[l](Ne),zn&&"p"===pe(zn[w])&&(zn[b](Mn,c),zn[d][b](c,zn),zn[d][v](zn)),c[d][b](Ee,c),Ee[l](c),Ee[l](Re),wn(Le,ln+"-d"),Le[u]='<input type="text">',p.d.x();var e=Le[h][0];return e[x](K,fe),ke(e,A,function(){p.is[j]=fe,$n(Ee,j)}),ke(e,L,function(e){var n=this,i=e[oe],t=e[ce],r=e[le],s=kn(e);i||t||"enter"!==s&&13!==r?t||"escape"!==s&&27!==r&&(n[k][z]||"backspace"!==s&&8!==r)||(p.d.x(1,1),Xe=0,e[S]()):(p.d.x(1,1),Xe&&Xe(e,p,n),Xe=0,n[k]="",xe(an)&&an(e,p,Ne),e[S]())}),Ee[l](Le),p}function An(){return Ee[d]?(zn&&(Ee[d][b](zn,Ee),zn[b](c,Mn),zn[v](Mn)),c[s][f]="",c[$](s)||c[m](s),$n(c,ln+"-source"),ze(c,L,Cn),Ee[d][v](Ee),p):p}var Xe,qe,Pe,p=this,ae="⌘",be="⇧",Ce='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',Se='"></path></svg>',Ae={classes:["rich-text-editor"],tags:["a(?:bbr)?|br?|code|d(?:fn|el)|em|i(?:ns)?|kbd|mark|p|span|strong|u|var"],blocks:["a(?:rticle|side)|blockquote|(?:fig)?caption|figure|h(?:[1-6]|eader)|div|li|[ou]l|p(?:re)?|section|t(?:able|[dh])"],attributes:["class","data-[\\w-]+?","href","id","rel","style","target","title"],tools:["b","i","u","x"],text:{b:["Bold",Ce+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+Se,ae+"+B"],i:["Italic",Ce+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+Se,ae+"+I"],u:["Underline",Ce+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+Se,ae+"+U"],a:["Link",Ce+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+Se,ae+"+L"],x:["Source",Ce+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+Se,ae+"+"+be+"+X"]},tidy:1,enter:1,x:1,update:0},Ee=ge("div"),Re=ge("div"),Ne=ge("div"),Le=ge("div"),Be="<br>",je=e[i].x,_e="<br(\\s[^<>]*?)?\\s*\\/?>",Te="<p(\\s[^<>]*?)?>",He="<\\/p>",Ke="\\s*(?:"+_e+")\\s*",Oe="^\\s*"+Te+"(?:"+Ke+")*\\s*|\\s*(?:"+Ke+")*"+He+"\\s*$",De="\\s*(?:"+Ke+")*"+He+"\\s*"+Te+"(?:"+Ke+")*\\s*",Ie="\\s*(?:"+Te+"(?:"+Ke+")*|(?:"+Ke+")*"+He+")\\s*",Ue="\\s*"+Te+"(?:"+Ke+")*\\s*(?:"+Ke+")*"+He+"\\s*",Fe="\\s*"+Te+"(?:"+Ke+")*(?:[\\s\\S]*?)(?:"+Ke+")*"+He+"\\s*";p.$=[ue,ue],p.$$=function(e,n){var i=[Ve(),Ge(n)];return $e(e)?i:i[e]},p.d=function(e,n,i){var t=Le[h][0];return t[O]=e,t[k]=n,ve(function(){fn(t)},1),Xe=i,p.d.v(1),p},p.d.x=function(e,n){var i=Le[h][0],t=i[k];return t&&!n?(wn(Ee,j),un[j]=se,un.d=se,ve(function(){p.is[E]=fe,p.is[R]=se,i[E](),i[N]()},1)):($n(Ee,"d"),$n(Ee,j),un.d=fe),p.is[E]=se,p.is[R]=fe,e&&(p[E](),nn(p.$[1])),p},p.d.v=function(e){return wn(Ee,"d"),$n(Ee,j),p.is[j]=fe,un.d=se,p.$[1]=e?en():ue,p},e[i][t][c.id||c.name||Object.keys(e[i][t])[z]]=p,a=a||{};for(Pe in Ae)$e(a[Pe])||(Ae[Pe]=a[Pe]);p.is={view:se,source:fe,d:fe,e:function(e){p.$[1]=en();var n=Qe(e);return nn(p.$[1]),n?se:fe},focus:fe,blur:se,error:fe};var un=p.is,on=Ae.enter,cn=Ae.x,an=Ae.update,ln=Ae.classes[0],vn=Ae.text||{},dn=ye(Ae.tags,"|"),hn=ye(Ae.attributes,"|"),gn=ye(Ae.blocks,"|"),pn=0,bn={b:function(){sn("strong")},i:function(){sn("em")},u:function(){sn("u")},a:function(e){var i,t,n=Je(1,1,0)[y](/\s|<[^<>]+?>/g,"");/^[a-z\d]+:\/\/\S+$/[_](n)?Qe("a")?sn("a",0):Ze(n):un.d?p.d.x(1):((i=Qe("a"))&&(t=i[$]("href")),p.d("http://",(t?t[y](/\/+$/,""):"http://"+pe(n))||"",function(e,n,i){Ze(i[k])}),ve(function(){t&&Le[h][0][N]()},2))},x:function(e){if(cn){var n=Ne.offsetHeight;n&&(c[s][f]=n+"px"),pn?(p.$[0]=en(),wn(Ee,"view"),$n(Ee,"source"),Ne[E](),p.$[1]&&nn(p.$[1]),pn=0):(p.$[1]=en(),wn(Ee,"source"),$n(Ee,"view"),c[E](),p.$[0]&&nn(p.$[0]),pn=1),un.view=!pn,un.source=!!pn,p.d.x(0,1),xe(cn)&&cn(e,p,pn||0)}}};p.t=function(e,n,i,t){var r=xn(n[0]+(n[2]?" ("+n[2]+")":""),ln+"-t:"+e,n,i);return $e(t)?t=ue:0>t&&(t=Re[h][z]+t),Re[b](r[0],Re[h][t]||ue),r[0]};for(Pe in bn)p.t[Pe]=bn[Pe],bn[Pe]=xn(vn[Pe][0]+(vn[Pe][2]?" ("+vn[Pe][2]+")":""),ln+"-t:"+Pe,vn[Pe],bn[Pe]),p.t[Pe].e=bn[Pe][0];p.f=function(e){return e=ye(e[y](/\r/g,"").split(je)),e=e[y](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(e,n,i){return n===i?"":e}),e=e[y](/<code(?:\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(e,n){return"<code>"+n[y](/(\t| {4})/g,"&nbsp;&nbsp;&nbsp;&nbsp;")+"</code>"}),e=e[y](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(e,n,i,t){if(i=pe(i),!me("^("+dn+"|"+gn+")$")[_](i))return"";(t=t||"")&&(t=t[y](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(e,n,i){return me("^("+hn+")$")[_](n)?e:""}));var r=/^(h[1-6]|th)$/[_](i),s=/^((fig)?caption)$/[_](i),f=n?"":t;return"b"===i||"strong"===i||r?"<"+n+"strong"+f+">"+(r&&n?Be+Be:""):"i"===i||"em"===i||s?"<"+n+"em"+f+">":me("^("+dn+")$")[_](i)?"<"+n+i+f+">":me("^("+gn+")$")[_](i)?Be+Be:""}),e=e[y](me(De,"gi"),"</p><p$1>")[y](me(Ke,"gi"),Be)[y](/\n/g,Be)[y](me("(?:"+Ke+"){3,}","gi"),Be+Be)[y](me("^(?:"+Ke+")+|(?:"+Ke+")+$","gi"),"")[y](me("(?:"+Ke+"){2,}","gi"),"</p><p>")[y](me(Ue,"gi"),""),e=e&&!me("^"+Fe+"$","gi")[_](e)?"<p>"+e+"</p>":e},mn(),yn(),wn(Ee,ln+" view"),c[x](K,fe),wn(Re,ln+"-tool"),wn(Ne,ln+"-view"),on&&wn(Ee,"expand"),Ne[x](T,se),Ne[x](K,fe),Ne[x](O,c[O]||""),ke(Ne,E,function(){p.is[E]=se,p.is[R]=fe,wn(Ee,E)}),ke(Ne,R,function(){p.is[E]=fe,p.is[R]=se,yn(),$n(Ee,E)}),ke(Ne,B,function(){ve(function(){mn();var e=Ne[u];Ne[u]="",Ye(e,0)},1)}),ke(Ne,L,function(e){var f,n=e[oe],i=e[ce],t=e[le],r=Ee,s=kn(e);if(!n||i||"b"!==s&&66!==t)if(!n||i||"i"!==s&&73!==t)if(!n||i||"u"!==s&&85!==t)if(!n||i||"l"!==s&&76!==t){if(n&&i&&("x"===s||88===t)&&cn)bn.x[1](),e[S]();else if(!i&&("enter"===s||13===t))if(on&&(de=Ve(),he=Ge(),Ye(Be,0),Ye(je,1),e[S]()),on)xe(on)&&on(e,p,Ne);else{for(;r=r[d];)if("form"===pe(r[w])){f=r;break}f&&(f.submit(),e[S]())}}else bn.a[1](),e[S]();else bn.u[1](),e[S]();else bn.i[1](),e[S]();else bn.b[1](),e[S]();xe(an)&&an(e,p,Ne),ve(function(){var e=Ne[u][y](me(je,"g"),"");e&&e!==Be||(Ne[u]=""),yn()},1)});var zn=c[d],Mn=ge("a");return Sn(),p.container=Ee,p.view=Ne,p.target=p.source=c,p.tool=Re,p.dialog=Le,p.config=Ae,p.c=We,p.e=Qe,p.i=Ye,p.m=rn,p.n=tn,p.r=nn,p.s=en,p.v=Je,p.w=sn,p[r]=Sn,p.destroy=An,p[E]=function(e){if(un.view){var i=Ne[u];Ne[E](),p.$[1]&&nn(p.$[1]),p.is[E]=se,p.is[R]=fe,0===e?(Ne[u]="",Ye(i,1)):1===e?(Ne[u]="",Ye(i,0)):e===se&&(he=n[q](),he[J](Ne),de=Ve(),de[X](),de[F](he))}else un.source&&(c[E](),0===e?fn(c,0):1===e?fn(c,c[k][z]):e===se&&c[N]());return p},p[R]=function(){return un.view?(p.is[E]=fe,p.is[R]=se,Ne[R]()):un.source&&c[R](),p},p.set=function(e,n){return e=p.f(e),(un.view||1===n)&&(e=e[y](me(Oe,"gi"),"")[y](me(De,"gi"),Be+Be)),$e(n)?un.view?(Ne[u]=e,yn()):un.source?(c[k]=e,mn()):un.d&&(Le[h][0][k]=e):0===n?(c[k]=e,mn()):1===n&&(Ne[u]=e,yn()),p},p.get=function(e,n){if($e(n)){var i;return i=un.source?c[k]:un.d?Le[h][0][k]:c[k],i?i:e}return 0===n?c[k]||e:1===n?Ne[u]||e:void 0},p.disable=function(){return Ne[m](T),c[x](H,se),p},p.enable=function(){return Ne[x](T,se),c[m](H),de},p})}(window,document,"RTE");