/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.2.0
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,n,t){function me(e){return n[f+"Element"](e)}function $e(e){return e.toLowerCase()}function ye(e){return"string"==typeof e}function ke(e){return 3===e.nodeType}function Me(e){return"undefined"==typeof e}function ze(e){return"function"==typeof e}function Ce(e,n){return new RegExp(e,n)}function Se(e,n){return n=n||"[\\w-:]+",e[z](Ce("<\\/"+n+">|<"+n+"(\\s[^<>]*?)?>","gi"),"")[z](/ +/g," ")[z](/^\s*|\s*$/g,"")}function Ne(e,n){return e.join(n||"")}function Re(e,n,t){return e[v](n,t,ae)}function Ee(e,n,t){return e[d](n,t)}function Be(e){var o,t=me(ve),i=n[f+"DocumentFragment"](),r=[],u=[],s="";if(ye(e)){for(t[c]=e;o=t[g];)u[E]($e(o[$]||"")),r[E](i[h](o));return[r,i,u,e]}for(u in e)(o=e[u])&&(ye(o)?(s+=o,t[c]=o,o=t[g]):s+=o[a],r[E]($e(o[$]||"")),i[h](o));return[e,i,r,s]}var be,xe,i="__instance__",r="lot",f="create",u="style",o="minHeight",s="HTML",c="inner"+s,a="outer"+s,l="className",s="EventListener",v="add"+s,d="remove"+s,s="Child",g="first"+s,h="append"+s,p="remove"+s,w="parentNode",b="children",x="childNodes",m="insertBefore",$="nodeName",s="Attribute",y="get"+s,k="set"+s,M="remove"+s,z="replace",C="value",S="length",N="indexOf",R="substring",E="push",B="preventDefault",_="click",L="focus",A="blur",T="select",j="keydown",H="paste",O="error",q="test",I="contenteditable",D="readonly",U="spellcheck",F="placeholder",K="getSelection",X="getRangeAt",G="rangeCount",J="addRange",P="removeAllRanges",Q=f+"Range",s="Contents",V="clone"+s,W="delete"+s,Y=T+"Node",Z=Y+s,ee="insertNode",ne="cloneRange",te="collapse",ie="setStart",re="setEnd",fe=ie+"Before",ue=ie+"After",oe=re+"Before",se=re+"After",ce=!0,ae=!1,le=null,ve="div",s="Key",de="ctrl"+s,ge="shift"+s,pe="keyCode",we=setTimeout;!function(e){e.version="1.2.0",e[i]={},e.each=function(n,t){return we(function(){var r,t=e[i];for(r in t)n(t[r],r,t)},0===t?0:t||1),e},e.x="​"}(e[t]=function(s,v){function ln(){return be=e[K]&&e[K]()||{},be[G]&&be||le}function vn(e){return be=ln(),be&&be[X](e||0)||le}function dn(e,n,t){if(e){if(be=ln()){var r,f,i=me(ve);for(r=0,f=be[G];f>r;++r)i[h](be[X](r)[V]());return e=Ne(i[c].split(qe)),e=Me(n)||n?d.f(e):e,Me(t)||t?e:e[z](Ce(Ge,"g"),"\n\n")[z](Ce(Je,"g"),"")}return""}return ln()+""}function gn(e,n){var r,f,u,o,t=dn(1,0,0),i=Be(t);if(i&&i[0][S]&&(xe=vn(),xe[W](),xe[ee](i[1])),i=i[0],e){for(u=0,o=i[S];o>u;++u)if(r=i[u],$e(r[$])===e)return r;return(Me(n)||n)&&(u=bn(),f=pn(qe+t),f=f&&f[0]&&f[0][w],f&&$e(f[$])===e&&f!==je)?(f[c]=Ne(f[c].split(qe)),t&&t!==f[c]?xn(u):$n([f]),f):le}return i[S]?i:le}function hn(e){return(xe=vn())&&(e=1===e?ae:0===e?ce:e,xe[te](e)),xe}function pn(e,n){if(Ze[L]){var t=Be(e);return(be=ln())&&(xe=vn(),xe[W](),xe[ee](t[1]),0===n?hn(1):1===n&&(pn(e,ce),hn(0)),be[P](),be[J](xe)),t[0]}return le}function wn(n){try{var t=gn("a"),i=Se(dn(1,1,0),"a");n=Se(n[z](/^\s*javascript:/i,""));var f=n[0],u=e.location.hostname;return f=-1!=="/?&#"[N](f)||-1===n[N]("/"),!u||0!==n[N]("//"+u)&&-1===n[N]("://"+u)||(f=1),i||(pn(n,ce),i=n),n?(t?t[k]("href",n):t=pn('<a href="'+n+'">'+i+"</a>",ce)[0],f?(t[M]("rel"),t[M]("target")):(t[k]("rel","nofollow"),t[k]("target","_blank"))):(t&&(i=t[c],t[w][p](t)),t=pn(i,ce)[0]),t}catch(o){}return le}function bn(){var e,n,t;return(e=vn())?(n=e[ne](),n[Z](je),n[re](e.startContainer,e.startOffset),t=(n+"")[S],[t,t+(e+"")[S]]):le}function xn(t){if(t){var r,u,s,c,a,l,i=n[Q](),f=0,o=[je];for(i[ie](je,0),i[te](ce);!l&&(c=o.pop());)if(ke(c))u=f+c[S],!a&&t[0]>=f&&t[0]<=u&&(i[ie](c,t[0]-f),a=1),a&&t[1]>=f&&t[1]<=u&&(i[re](c,t[1]-f),l=1),f=u;else for(s=c[x][S];s--;)o[E](c[x][s]);r=e[K](),r[P](),r[J](i)}}function mn(){return Be(dn(1,1,0))[0]}function $n(e,n){n=Me(n)||!n;var t=e[0],i=e[e[S]-1];return be=ln(),xe=vn(),1===e[S]?xe[n?Z:Y](t):(xe[n?ue:fe](t),xe[n?oe:se](i)),be[P](),be[J](xe),e}function yn(e,n,t){if(Ze[L]){Me(n)&&(n=-1);var u,s,l,i=gn(e),r=dn(1,0,0),f=[];if(0===n||-1===n&&i){if(i){u=i[c],i[w][p](i);var v=Se(r,e),d=Se(u,e);if(-1!==d[N](v)&&v[S]<d[S])i=Ce("<"+e+"(\\s[^<>]*?)?>","i").exec(i[a]),i=i&&i[1]||"",r=Be([u[R](0,u[N](v)),v,u[R](u[N](v)+v[S])])[0],r[0]&&pn("<"+e+i+">"+(r[0][a]||r[0])+"</"+e+">",0),r[2]&&pn("<"+e+i+">"+(r[2][a]||r[2])+"</"+e+">",1),f=pn(r[1][a]||r[1],ce);else{if(f=Be(r),u=me(ve),f&&f[2]&&(l=f[2][S]))for(s=0;l>s;++s)f[2][s]===e?u[c]+=f[0][s][c]:u[h](f[0][s]);f=pn(u[c],ce)}}}else(1===n||-1===n&&!i)&&(i||(r=r&&r[z](Ce("(\\n|"+Ke+"){2,}","gi"),"</"+e+">"+Oe+Oe+"<"+e+">")),f=pn("<"+e+">"+(r||t||"")+"</"+e+">",ce));return f[0]||le}return le}function kn(e,n){L in e&&(e.selectionStart=e.selectionEnd=Me(n)?e[C][S]:n,e[L]())}function Mn(e,n){var t=e[l];return Ce("(^|\\s)\\s*"+n+"\\s*(\\s|$)")[q](t)?e:(e[l]=Se(t+" "+n),e)}function zn(e,n){var t=Se(e[l][z](Ce("(^|\\s)\\s*"+n+"\\s*(\\s|$)","g"),"$1$2"));return t?e[l]=t:e[M]("class"),e}function Cn(e,n,t,i){function u(e){i.apply(this,[e,d,r]),Nn(),je[L](),ze(tn)&&tn(e,d,je),e[B]()}var r=Mn(me("a"),n),f=t[1]||t[0];return 0===f[N]("svg:")&&(f=ye+f.slice(4)+_e),r[c]="<span>"+f+"</span>",r.title=e,r.href="javascript:;",i&&(Re(r,"touchstart",u),Re(r,"mousedown",u)),[r,i]}function Sn(){je[c]=d.f(s[C])[z](Ce(Ge,"gi"),Oe+Oe)[z](Ce(Je,"gi"),"")}function Nn(){var e=d.f(je[c]);Le.tidy&&(e=e[z](Ce(Ge,"gi"),"</p>\n\n<p$1>")[z](Ce(De,"gi"),Oe+"\n")),s[C]=e}function Rn(e){return $e(e.key||String.fromCharCode(e[pe]))}function _n(e){var n=e[de],t=e[ge],i=e[pe],r=Rn(e);n&&t&&("x"===r||88===i)&&nn?(an.x[1](),e[B]()):t||"enter"!==r&&13!==i||ze(en)&&en(e,d,s),ze(tn)&&tn(e,d,s),we(Sn,2)}function Ln(){Ze.view&&je[L]()}function An(){if(Ae[w])return d;Mn(s,rn+"-source"),Re(s,j,_n),Re(s,L,Ln),We=Le.tools;for(Ye in We)if(Ye=We[Ye],an[Ye]){if("x"===Ye&&!nn)continue;Te[h](an[Ye][0])}Ae[h](je),En&&"p"===$e(En[$])&&(En[m](Bn,s),En[w][m](s,En),En[w][p](En)),s[w][m](Ae,s),Ae[h](s),Ae[h](Te),Mn(He,rn+"-d"),He[c]='<input type="text">',d.d.x();var e=He[b][0];return e[k](U,ae),Re(e,_,function(){Ze[O]=ae,zn(Ae,O)}),Re(e,j,function(e){var n=this,t=e[de],i=e[ge],r=e[pe],f=Rn(e);t||i||"enter"!==f&&13!==r?i||"escape"!==f&&27!==r&&(n[C][S]||"backspace"!==f&&8!==r)||(d.d.x(1,1),Ve=0,e[B]()):(d.d.x(1,1),Ve&&Ve(e,d,n),Ve=0,n[C]="",ze(tn)&&tn(e,d,je),e[B]())}),Ae[h](He),Sn(),Nn(),d}function Tn(){return Ae[w]?(En&&(Ae[w][m](En,Ae),En[m](s,Bn),En[p](Bn)),s[u][o]="",s[y](u)||s[M](u),zn(s,rn+"-source"),Ee(s,j,_n),Ee(s,L,Ln),Ae[w][p](Ae),Sn(),Nn(),d):d}var Ve,We,Ye,d=this,g="⌘",he="⇧",ye='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',_e='"></path></svg>',Le={classes:["rich-text-editor"],tags:["a|abbr|b|br|code|dfn|del|em|i|ins|kbd|mark|p|span|strong|u|var"],blocks:["article|aside|blockquote|figure|figcaption|figure|h[1-6]|header|div|li|[ou]l|p|pre|section|table|tr|th"],attributes:["class|data-[\\w-]+?|href|id|rel|style|target|title"],tools:["b","i","u","x"],text:{b:["Bold",ye+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+_e,g+"+B"],i:["Italic",ye+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+_e,g+"+I"],u:["Underline",ye+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+_e,g+"+U"],a:["Link",ye+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+_e,g+"+L"],x:["Source",ye+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+_e,g+"+"+he+"+X"]},tidy:1,enter:1,x:1,update:0},Ae=me(ve),Te=me(ve),je=me(ve),He=me(ve),Oe="<br>",qe=e[t].x,Ie="(\\s[^<>]*?)?",De="<br"+Ie+"\\s*\\/?>",Ue="<p"+Ie+">",Fe="<\\/p>",Ie="\\s*",Ke=Ie+"(?:"+De+")"+Ie,Xe="^"+Ie+Ue+"(?:"+Ke+")*"+Ie+"|"+Ie+"(?:"+Ke+")*"+Fe+Ie+"$",Ge=Ie+"(?:"+Ke+")*"+Fe+Ie+Ue+"(?:"+Ke+")*"+Ie,Je=Ie+"(?:"+Ue+"(?:"+Ke+")*|(?:"+Ke+")*"+Fe+")"+Ie,Pe=Ie+Ue+"(?:"+Ke+")*"+Ie+"(?:"+Ke+")*"+Fe+Ie,Qe=Ie+Ue+"(?:"+Ke+")*(?:[\\s\\S]*?)(?:"+Ke+")*"+Fe+Ie;d.is={view:ce,source:ae,d:ae,e:function(e){var n=ln()[L+"Node"];if(!n)return le;if(ke(n)&&(n=n[w]),n===je){if((n=dn(1,1,0))&&-1!==$e(n)[N]("</"+e+">"))return pn(n,ce)[0]}else{if(n[$]&&$e(n[$])===e)return n;for(;n&&n!==je;){if(n[$]&&$e(n[$])===e)return n;n=n[w]}}return le},focus:ae,blur:ce,error:ae},v=v||{};for(Ye in Le)Me(v[Ye])||(Le[Ye]=v[Ye]);var Ze=d.is,en=Le.enter,nn=Le.x,tn=Le.update,rn=Le.classes[0],fn=Le.text||{},un=Ne(Le.tags,"|"),on=Ne(Le.attributes,"|"),sn=Ne(Le.blocks,"|"),cn=0,an={b:function(){yn("strong")},i:function(){yn("em")},u:function(){yn("u")},a:function(e){var t,i,n=Se(dn(1,1,0)).split(/\s/)[0];/^[a-z\d]+:\/\/\S+$/[q](n)?(gn("a")?yn("a",0):wn(n),Nn()):Ze.d?d.d.x(1):((t=gn("a"))&&(i=t[y]("href")),Ie="http://",d.d(Ie,(i?i[z](/\/+$/,""):Ie+$e(n))||"",function(e,n,t){wn(t[C]),Nn()}),we(function(){i&&He[b][0][T]()},2))},x:function(e){if(nn){var n=je.offsetHeight;n&&(s[u][o]=n+"px"),cn?(d[r][0]=bn(),Mn(Ae,"view"),zn(Ae,"source"),je[L](),xn(d[r][1]),cn=0):(d[r][1]=bn(),Mn(Ae,"source"),zn(Ae,"view"),s[L](),xn(d[r][0]),cn=1),Ze.view=!cn,Ze.source=!!cn,d.d.x(0,1),ze(nn)&&nn(e,d,cn||0)}}};d.$$=function(e,n){var t=[ln(),vn(n)];return Me(e)?t:t[e]},d[r]=[le,le],d.d=function(e,n,t){var i=He[b][0];return i[F]=e,i[C]=n,we(function(){kn(i)},1),Ve=t,d.d.v(1),d},d.d.x=function(e,n){var t=He[b][0],i=t[C];return i&&!n?(Mn(Ae,O),Ze[O]=ce,Ze.d=ce,we(function(){Ze[L]=ae,Ze[A]=ce,t[L](),t[T]()},1)):(zn(Ae,"d"),zn(Ae,O),Ze.d=ae),Ze[L]=ce,Ze[A]=ae,e&&(d[L](),xn(d[r][1])),d},d.d.v=function(e){return Mn(Ae,"d"),zn(Ae,O),Ze[O]=ae,Ze.d=ce,d[r][1]=e?bn():le,d},e[t][i][s.id||s.name||Object.keys(e[t][i])[S]]=d,d.t=function(e,n,t,i){var r=Cn(n[0]+(n[2]?" ("+n[2]+")":""),rn+"-t:"+e,n,t);return Me(i)?i=le:0>i&&(i=Te[b][S]+i),Te[m](r[0],Te[b][i]||le),d.t[e]=r[1],d.t[e].e=r[0]};for(Ye in an)d.t[Ye]=an[Ye],an[Ye]=Cn(fn[Ye][0]+(fn[Ye][2]?" ("+fn[Ye][2]+")":""),rn+"-t:"+Ye,fn[Ye],an[Ye]),d.t[Ye].e=an[Ye][0];d.f=function(e){return e=Ne(e[z](/\r/g,"").split(qe)),e=e[z](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(e,n,t){return n===t?"":e}),e=e[z](/<code(\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(e,n,t){return"<code"+(n||"")+">"+t[z](/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")[z](/ /g,"&nbsp;")+"</code>"}),e=e[z](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(e,n,t,i){if(t=$e(t),!Ce("^("+un+"|"+sn+")$")[q](t))return"";(i=i||"")&&(i=i[z](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(e,n,t){return Ce("^("+on+")$")[q](n)?e:""}));var r=/^(h[1-6]|th)$/[q](t),f=/^((fig)?caption)$/[q](t),u=n?"":i;return"b"===t||"strong"===t||r?"<"+n+"strong"+u+">"+(r&&n?Oe+Oe:""):"i"===t||"em"===t||f?"<"+n+"em"+u+">":Ce("^("+un+")$")[q](t)?"<"+n+t+u+">":Ce("^("+sn+")$")[q](t)?Oe+Oe:""}),e=e[z](Ce(Ge,"gi"),"</p><p$1>")[z](Ce(Ke,"gi"),Oe)[z](/\n/g,Oe)[z](Ce("(?:"+Ke+"){3,}","gi"),Oe+Oe)[z](Ce("^(?:"+Ke+")+|(?:"+Ke+")+$","gi"),"")[z](Ce("(?:"+Ke+"){2,}","gi"),"</p><p>")[z](Ce(Pe,"gi"),""),e=e&&!Ce("^"+Qe+"$","gi")[q](e)?"<p>"+e+"</p>":e,e=Be(e),e[3]||""},Sn(),Nn(),Mn(Ae,rn+" view"),s[k](U,ae),Mn(Te,rn+"-tool"),Mn(je,rn+"-view"),en&&Mn(Ae,"expand"),je[k](I,ce),je[k](U,ae),je[k](F,s[F]||""),Re(je,L,function(){Ze[L]=ce,Ze[A]=ae,Mn(Ae,L),s.required&&(""===s[C]||(Ze[O]=ae,zn(Ae,O)))}),Re(je,A,function(){Ze[L]=ae,Ze[A]=ce,Nn(),zn(Ae,L),s.required&&(""===s[C]?(Ze[O]=ce,Mn(Ae,O)):(Ze[O]=ae,zn(Ae,O)))}),Re(je,H,function(){we(function(){var e=bn();Nn(),Sn(),je[A](),xn(e)},1)}),Re(je,j,function(e){var u,n=e[de],t=e[ge],i=e[pe],r=Ae,f=Rn(e);if(!n||t||"b"!==f&&66!==i)if(!n||t||"i"!==f&&73!==i)if(!n||t||"u"!==f&&85!==i)if(!n||t||"l"!==f&&76!==i){if(n&&t&&("x"===f||88===i)&&nn)an.x[1](),e[B]();else if(!t&&("enter"===f||13===i))if(en&&(be=ln(),xe=vn(),pn(Oe,0),pn(qe,1),e[B]()),en)ze(en)&&en(e,d,je);else{for(Nn();r=r[w];)if("form"===$e(r[$])){u=r;break}u&&(u.submit(),e[B]())}}else an.a[1](),e[B]();else an.u[1](),e[B]();else an.i[1](),e[B]();else an.b[1](),e[B]();ze(tn)&&tn(e,d,je),we(function(){var e=je[c][z](Ce(qe,"g"),"");e&&e!==Oe||(je[c]="")},0)});var En=s[w],Bn=me("a");return An(),d.config=Le,d.container=Ae,d.view=je,d.source=d.target=s,d.tool=Te,d.dialog=He,d.c=hn,d.e=gn,d.g=Be,d.i=pn,d.m=$n,d.n=mn,d.r=xn,d.s=bn,d.v=dn,d.w=yn,d[f]=An,d.destroy=Tn,d[L]=function(e){if(Ze.view){var t=je[c];je[L](),d[r][1]&&xn(d[r][1]),Ze[L]=ce,Ze[A]=ae,0===e?(je[c]="",pn(t,1)):1===e?(je[c]="",pn(t,0)):e===ce&&(xe=n[Q](),xe[Z](je),be=ln(),be[P](),be[J](xe))}else Ze.source&&(s[L](),0===e?kn(s,0):1===e?kn(s,s[C][S]):e===ce&&s[T]());return d},d[A]=function(){return Ze.view?(Ze[L]=ae,Ze[A]=ce,je[A]()):Ze.source&&s[A](),d},d.set=function(e,n){return e=d.f(e),(Ze.view||1===n)&&(e=e[z](Ce(Xe,"gi"),"")[z](Ce(Ge,"gi"),Oe+Oe)),Me(n)?Ze.view?(je[c]=e,Nn()):Ze.source?(s[C]=e,Sn()):Ze.d&&(He[b][0][C]=e):0===n?(s[C]=e,Sn()):1===n&&(je[c]=e,Nn()),d},d.get=function(e,n){if(Me(n)){var t;return t=Ze.source?s[C]:Ze.d?He[b][0][C]:s[C],t?t:e}return 0===n?s[C]||e:1===n?je[c]||e:void 0},d.disable=function(){return je[M](I),s[k](D,ce),d},d.enable=function(){return je[k](I,ce),s[M](D),be},d})}(window,document,"RTE");