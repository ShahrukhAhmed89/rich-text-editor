/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.0.7
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,i,n){function pe(e){return i[r+"Element"](e)}function be(e){return e.toLowerCase()}function we(e){return 3===e.nodeType}function $e(e){return"undefined"==typeof e}function xe(e){return"function"==typeof e}function me(e,i){return new RegExp(e,i)}function ye(e,i,n){return e[c](i,n,ce)}function ke(e,i,n){return e[a](i,n)}function ze(e){var s,f,n=pe("div"),t=i[r+"DocumentFragment"]();for(n[o]=e;s=n[p];)f=t[l](s);return[t[p],f,t]}var I,U,t="__instance__",r="create",s="style",f="minHeight",o="innerHTML",u="className",c="addEventListener",a="removeEventListener",l="appendChild",v="removeChild",d="parentNode",h="children",g="childNodes",p="firstChild",b="insertBefore",w="nodeName",$="getAttribute",x="setAttribute",m="removeAttribute",y="replace",z="value",C="length",M="indexOf",S="substring",A="preventDefault",E="click",N="focus",R="blur",j="select",B="keydown",L="paste",_="error",T="test",H="contenteditable",K="readonly",O="spellcheck",D="placeholder",q="getSelection",F="getRangeAt",X="rangeCount",G="addRange",J="removeAllRanges",P=r+"Range",Q="cloneContents",V="deleteContents",W=j+"Node",Y=W+"Contents",Z="insertNode",ee="cloneRange",ie="collapse",ne="setStart",te="setEnd",re=ne+"Before",se=ne+"After",ue=!0,ce=!1,ae=null,le="ctrlKey",ve="shiftKey",he="keyCode",ge=setTimeout;!function(e){e.version="1.0.7",e[t]={},e.each=function(i,n){return ge(function(){var r,n=e[t];for(r in n)i(n[r],r,n)},0===n?0:n||1),e},e.x="​"}(e[n]=function(c,a){function qe(){return I=e[q]&&e[q]()||{},I[X]&&I||ae}function Fe(e){return I=qe(),I&&I[F](e||0)||ae}function Xe(e,i,n){if(e){if(I=qe()){var r,s,t=pe("div");for(r=0,s=I[X];s>r;++r)t[l](I[F](r)[Q]());return e=t[o].split(Ne).join(""),e=$e(i)||i?p.f(e):e,$e(n)||n?e:e[y](me(Te,"g"),"\n\n")[y](me(He,"g"),"")}return""}return qe()+""}function Ge(e){I=qe();var n,i=I&&I[N+"Node"]||ae;return i?(we(i)&&i[d]!==Se&&(i=i[d]),n=be(i[w]),e?n===e?i:ae:i):ae}function Je(e){return(U=Fe())&&(e=1===e?ce:0===e?ue:e,U[ie](e)),p}function Pe(e,i){if(p.is[N]){var n,r,s;return(I=qe())&&(U=Fe(),U[V](),n=ze(e),r=n[0],s=n[1],U[Z](n[2]),s&&(U=U[ee](),U[se](s),i===ue?U[re](r):(1===i?(i=0,Pe(e,ue)):0===i&&(i=1),Je(i)),I[J](),I[G](U))),r}return ae}function Qe(i){try{var r,n=Ge("a"),t=Xe(1,1,0)[y](/<a(\s[^<>]*?)?>|<\/a>/g,"");i=i[y](/^\s*javascript:/i,"");var s=i[0],f=e.location.hostname;return s=-1!=="/?&#"[M](s)||-1===i[M]("/"),!f||0!==i[M]("//"+f)&&-1===i[M]("://"+f)||(s=1),i?(n?n[x]("href",i):(r=Pe('<a href="'+i+'">'+t+"</a>",ue),Fe()[Y](r)),(n=Ge("a"))&&(s?(n[m]("rel"),n[m]("target")):(n[x]("rel","nofollow"),n[x]("target","blank")))):(n&&(t=n[o],n[d][v](n)),Pe(t,ue)),Ge("a")}catch(u){}return ae}function Ve(){var e,i,n;return(e=Fe())?(i=e[ee](),i[Y](Se),i[te](e.startContainer,e.startOffset),n=(i+"")[C],[n,n+(e+"")[C]]):ae}function We(n){if(n){var r,f,u,c,a,l,t=i[P](),s=0,o=[Se];for(t[ne](Se,0),t[ie](ue);!l&&(c=o.pop());)if(we(c))f=s+c[C],!a&&n[0]>=s&&n[0]<=f&&(t[ne](c,n[0]-s),a=1),a&&n[1]>=s&&n[1]<=f&&(t[te](c,n[1]-s),l=1),s=f;else for(u=c[g][C];u--;)o.push(c[g][u]);r=e[q](),r[J](),r[G](t)}}function Ye(e,i,n){if(p.is[N]){$e(i)&&(i=-1);var u,t=me("<"+e+"(?:\\s[^<>]*?)?>|<\\/"+e+">","g"),r=Ge(e),s=Xe(1,1,0)[y](t,""),f=ae;return r!==Se&&(0===i||-1===i&&r?r&&(u=r[o])&&(r[d][v](r),s&&-1!==u[M](s)?(Pe("<"+e+">"+u[S](0,u[M](s))+"</"+e+">",0),f=Pe(s,0),Pe("<"+e+">"+u[S](u[M](s)+s[C])+"</"+e+">",1)):f=Pe(s||u,ue)):(1===i||-1===i&&!r)&&(s=s[y](me("(\\n|"+Le+"){2,}","g"),"</"+e+">"+Ee+Ee+"<"+e+">"),f=Pe("<"+e+">"+s+"</"+e+">",ue)),f&&(U=Fe(),U&&U[Y](f),!s&&n&&Pe(n,ue))),f}return ae}function Ze(e,i){N in e&&(e.selectionStart=e.selectionEnd=$e(i)?e[z][C]:i,e[N]())}function ai(e,i){var n=e[u];return me("(^|\\s)\\s*"+i+"\\s*(\\s|$)")[T](n)?e:(e[u]=n+" "+i,e)}function li(e,i){var n=e[u][y](me("(^|\\s)\\s*"+i+"\\s*(\\s|$)","g"),"$1$2");return n?e[u]=n[y](/^\s*|\s*$/g,""):e[m]("class"),e}function vi(e,i,n,t){function f(e){t.apply(this,[e,p,r]),hi(),Se[N](),xe(ni)&&ni(e,p,Se),e[A]()}var r=ai(pe("a"),i),s=n[1]||n[0];return 0===s[M]("svg:")&&(s=fe+s.slice(4)+oe),r[o]="<span>"+s+"</span>",r.title=e,r.href="javascript:;",t&&(ye(r,"touchstart",f),ye(r,"mousedown",f)),[r,t]}function di(){Se[o]=p.f(c[z])[y](me(Te,"gi"),Ee+Ee)[y](me(He,"gi"),"")}function hi(){var e=p.f(Se[o]);de.tidy&&(e=e[y](me(Te,"gi"),"</p>\n\n<p$1>")[y](me(Re,"gi"),Ee+"\n")),c[z]=e}function gi(e){return be(e.key||String.fromCharCode(e[he]))}function wi(e){var i=e[le],n=e[ve],t=e[he],r=gi(e);i&&n&&("x"===r||88===t)&&ii?(ci.x[1](),e[A]()):n||"enter"!==r&&13!==t||xe(ei)&&ei(e,p,c),xe(ni)&&ni(e,p,c),ge(di,1)}function $i(){if(Ce[d])return p;ai(c,ti+"-source"),ye(c,B,wi),Ie=de.tools;for(Ue in Ie)if(Ue=Ie[Ue],ci[Ue]){if("x"===Ue&&!ii)continue;Me[l](ci[Ue][0])}Ce[l](Se),pi&&"p"===be(pi[w])&&(pi[b](bi,c),pi[d][b](c,pi),pi[d][v](pi)),c[d][b](Ce,c),Ce[l](c),Ce[l](Me),ai(Ae,ti+"-d"),Ae[o]='<input type="text">',p.d.x();var e=Ae[h][0];return e[x](O,ce),ye(e,E,function(){p.is[_]=ce,li(Ce,_)}),ye(e,B,function(e){var i=this,n=e[le],t=e[ve],r=e[he],s=gi(e);n||t||"enter"!==s&&13!==r?t||"escape"!==s&&27!==r&&(i[z][C]||"backspace"!==s&&8!==r)||(p.d.x(1,1),De=0,e[A]()):(p.d.x(1,1),De&&De(e,p,i),De=0,i[z]="",xe(ni)&&ni(e,p,Se),e[A]())}),Ce[l](Ae),p}function xi(){return Ce[d]?(pi&&(Ce[d][b](pi,Ce),pi[b](c,bi),pi[v](bi)),c[s][f]="",c[$](s)||c[m](s),li(c,ti+"-source"),ke(c,B,wi),Ce[d][v](Ce),p):p}var De,Ie,Ue,p=this,k="⌘",W="⇧",fe='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',oe='"></path></svg>',de={classes:["rich-text-editor"],tags:["a","abbr","b","br","code","dfn","del","em","i","ins","kbd","mark","p","span","strong","u","var"],attributes:["class","data-[\\w-]+?","href","id","rel","style","target","title"],tools:["b","i","u","x"],text:{b:["Bold",fe+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+oe,k+"+B"],i:["Italic",fe+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+oe,k+"+I"],u:["Underline",fe+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+oe,k+"+U"],a:["Link",fe+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+oe,k+"+L"],x:["Source",fe+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+oe,k+"+"+W+"+X"]},tidy:1,enter:1,x:1,update:0},Ce=pe("div"),Me=pe("div"),Se=pe("div"),Ae=pe("div"),Ee="<br>",Ne=e[n].x,Re="<br(\\s[^<>]*?)?\\s*\\/?>",je="<p(\\s[^<>]*?)?>",Be="<\\/p>",Le="\\s*(?:"+Re+")\\s*",_e="^\\s*"+je+"(?:"+Le+")*\\s*|\\s*(?:"+Le+")*"+Be+"\\s*$",Te="\\s*(?:"+Le+")*"+Be+"\\s*"+je+"(?:"+Le+")*\\s*",He="\\s*(?:"+je+"(?:"+Le+")*|(?:"+Le+")*"+Be+")\\s*",Ke="\\s*"+je+"(?:"+Le+")*\\s*(?:"+Le+")*"+Be+"\\s*",Oe="\\s*"+je+"(?:"+Le+")*(?:[\\s\\S]*?)(?:"+Le+")*"+Be+"\\s*";p.$=[ae,ae],p.$$=function(e,i){var n=[qe(),Fe(i)];return $e(e)?n:n[e]},p.d=function(e,i,n){var t=Ae[h][0];return t[D]=e,t[z]=i,ge(function(){Ze(t)},1),De=n,p.d.v(1),p},p.d.x=function(e,i){var n=Ae[h][0],t=n[z];return t&&!i?(ai(Ce,_),p.is[_]=ue,p.is.d=ue,ge(function(){p.is[N]=ce,p.is[R]=ue,n[N](),n[j]()},1)):(li(Ce,"d"),li(Ce,_),p.is.d=ce),p.is[N]=ue,p.is[R]=ce,e&&(p[N](),We(p.$[1])),p},p.d.v=function(e){return ai(Ce,"d"),li(Ce,_),p.is[_]=ce,p.is.d=ue,p.$[1]=e?Ve():ae,p},e[n][t][c.id||c.name||Object.keys(e[n][t])[C]]=p,a=a||{};for(Ue in de)$e(a[Ue])||(de[Ue]=a[Ue]);p.is={view:ue,source:ce,d:ce,e:function(e){return"string"==typeof e?Ge(e)?ue:ce:Ge()===e},focus:ce,blur:ue,error:ce};var ei=de.enter,ii=de.x,ni=de.update,ti=de.classes[0],ri=de.text||{},si=de.tags.join("|"),fi=de.attributes.join("|"),oi="a(rticle|side)|blockquote|(fig)?caption|figure|h([1-6]|eader)|div|li|[ou]l|p(re)?|section|t(able|[dh])",ui=0,ci={b:function(){Ye("strong")},i:function(){Ye("em")},u:function(){Ye("u")},a:function(e){var n,t,i=Xe(1,1,0);/^[a-z\d]+:\/\/\S+$/[T](i)?Ge("a")?Ye("a",0):Qe(i):p.is.d?p.d.x(1):((n=Ge("a"))&&(t=n[$]("href")),p.d("http://",(t?t[y](/\/+$/,""):"http://"+be(i[y](/\s|<[^<>]+?>/g,"")))||"",function(e,i,n){Qe(n[z])}),ge(function(){t&&Ae[h][0][j]()},2))},x:function(e){if(ii){var i=Se.offsetHeight;i&&(c[s][f]=i+"px"),ui?(p.$[0]=Ve(),ai(Ce,"view"),li(Ce,"source"),Se[N](),p.$[1]&&We(p.$[1]),ui=0):(p.$[1]=Ve(),ai(Ce,"source"),li(Ce,"view"),c[N](),p.$[0]&&We(p.$[0]),ui=1),p.is.view=!ui,p.is.source=!!ui,p.d.x(0,1),xe(ii)&&ii(e,p,ui||0)}}};p.t=function(e,i,n,t){var r=vi(i[0]+(i[2]?" ("+i[2]+")":""),ti+"-t:"+e,i,n);return $e(t)?t=ae:0>t&&(t=Me[h][C]+t),Me[b](r[0],Me[h][t]||ae),r[0]};for(Ue in ci)p.t[Ue]=ci[Ue],ci[Ue]=vi(ri[Ue][0]+(ri[Ue][2]?" ("+ri[Ue][2]+")":""),ti+"-t:"+Ue,ri[Ue],ci[Ue]),p.t[Ue].e=ci[Ue][0];p.f=function(e){return e=e[y](/\r/g,"").split(Ne).join(""),e=e[y](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(e,i,n){return i===n?"":e}),e=e[y](/<code(?:\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(e,i){return"<code>"+i[y](/(\t| {4})/g,"&nbsp;&nbsp;&nbsp;&nbsp;")+"</code>"}),e=e[y](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(e,i,n,t){if(n=be(n),!me("^("+si+"|"+oi+")$")[T](n))return"";(t=t||"")&&(t=t[y](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(e,i,n){return me("^("+fi+")$")[T](i)?e:""}));var r=/^(h[1-6]|th)$/[T](n),s=/^((fig)?caption)$/[T](n),f=i?"":t;return me("^("+si+")$")[T](n)?"<"+i+n+f+">":"b"===n||"strong"===n||r?"<"+i+"strong"+f+">"+(r&&i?Ee+Ee:""):"i"===n||"em"===n||s?"<"+i+"em"+f+">":me("^("+oi+")$")[T](n)?Ee+Ee:""}),e=e[y](me(Te,"gi"),"</p><p$1>")[y](me(Le,"gi"),Ee)[y](/\n/g,Ee)[y](me("(?:"+Le+"){3,}","gi"),Ee+Ee)[y](me("^(?:"+Le+")+|(?:"+Le+")+$","gi"),"")[y](me("(?:"+Le+"){2,}","gi"),"</p><p>")[y](me(Ke,"gi"),""),e=e&&!me("^"+Oe+"$","gi")[T](e)?"<p>"+e+"</p>":e},di(),hi(),ai(Ce,ti+" view"),c[x](O,ce),ai(Me,ti+"-tool"),ai(Se,ti+"-view"),ei&&ai(Ce,"expand"),Se[x](H,ue),Se[x](O,ce),Se[x](D,c[D]||""),ye(Se,N,function(){p.is[N]=ue,p.is[R]=ce,ai(Ce,N)}),ye(Se,R,function(){p.is[N]=ce,p.is[R]=ue,hi(),li(Ce,N)}),ye(Se,L,function(){ge(function(){di();var e=Se[o];Se[o]="",Pe(e,0)},1)}),ye(Se,B,function(e){var f,i=e[le],n=e[ve],t=e[he],r=Ce,s=gi(e);if(!i||n||"b"!==s&&66!==t)if(!i||n||"i"!==s&&73!==t)if(!i||n||"u"!==s&&85!==t)if(!i||n||"l"!==s&&76!==t){if(i&&n&&("x"===s||88===t)&&ii)ci.x[1](),e[A]();else if(!n&&("enter"===s||13===t))if(ei&&(I=qe(),U=Fe(),Pe(Ee,0),Pe(Ne,1),e[A]()),ei)xe(ei)&&ei(e,p,Se);else{for(;r=r[d];)if("form"===be(r[w])){f=r;break}f&&(f.submit(),e[A]())}}else ci.a[1](),e[A]();else ci.u[1](),e[A]();else ci.i[1](),e[A]();else ci.b[1](),e[A]();xe(ni)&&ni(e,p,Se),ge(function(){var e=Se[o][y](me(Ne,"g"),"");e&&e!==Ee||(Se[o]=""),hi()},1)});var pi=c[d],bi=pe("a");return $i(),p.container=Ce,p.view=Se,p.target=p.source=c,p.tool=Me,p.dialog=Ae,p.config=de,p.c=Je,p.e=Ge,p.i=Pe,p.r=We,p.s=Ve,p.v=Xe,p.w=Ye,p[r]=$i,p.destroy=xi,p[N]=function(e){if(p.is.view){var n=Se[o];Se[N](),p.$[1]&&We(p.$[1]),p.is[N]=ue,p.is[R]=ce,0===e?(Se[o]="",Pe(n,1)):1===e?(Se[o]="",Pe(n,0)):e===ue&&(U=i[P](),U[Y](Se),I=qe(),I[J](),I[G](U))}else p.is.source&&(c[N](),0===e?Ze(c,0):1===e?Ze(c,c[z][C]):e===ue&&c[j]());return p},p[R]=function(){return p.is.view?(p.is[N]=ce,p.is[R]=ue,Se[R]()):p.is.source&&c[R](),p},p.set=function(e,i){return e=p.f(e),(p.is.view||1===i)&&(e=e[y](me(_e,"gi"),"")[y](me(Te,"gi"),Ee+Ee)),$e(i)?p.is.view?(Se[o]=e,hi()):p.is.source?(c[z]=e,di()):p.is.d&&(Ae[h][0][z]=e):0===i?(c[z]=e,di()):1===i&&(Se[o]=e,hi()),p},p.get=function(e,i){if($e(i)){var n;return n=p.is.source?c[z]:p.is.d?Ae[h][0][z]:c[z],n?n:e}return 0===i?c[z]||e:1===i?Se[o]||e:void 0},p.disable=function(){return Se[m](H),c[x](K,ue),p},p.enable=function(){return Se[x](H,ue),c[m](K),I},p})}(window,document,"RTE");