/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.1.3
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,n,t){function me(e){return n[r+"Element"](e)}function xe(e){return e.toLowerCase()}function $e(e){return"string"==typeof e}function ye(e){return 3===e.nodeType}function ke(e){return"undefined"==typeof e}function Me(e){return"function"==typeof e}function ze(e,n){return new RegExp(e,n)}function Ce(e,n){return n=n||"[\\w-:]+",e[M](ze("<\\/"+n+">|<"+n+"(\\s[^<>]*?)?>","gi"),"")[M](/ +/g," ")[M](/^\s*|\s*$/g,"")}function Ee(e,n){return e.join(n||"")}function Ne(e,n,t){return e[l](n,t,ce)}function Le(e,n,t){return e[d](n,t)}function Te(e){var u,t=me(le),i=n[r+"DocumentFragment"](),f=[],o=[],a="";if($e(e)){for(t[s]=e;u=t[v];)o[L](xe(u[x]||"")),f[L](i[g](u));return[f,i,o,e]}for(o in e)(u=e[o])&&($e(u)?(a+=u,t[s]=u,u=t[v]):a+=u[c],f[L](xe(u[x]||"")),i[g](u));return[e,i,f,a]}var we,be,i="__instance__",r="create",f="style",o="minHeight",u="HTML",s="inner"+u,c="outer"+u,a="className",u="EventListener",l="add"+u,d="remove"+u,u="Child",v="first"+u,g="append"+u,h="remove"+u,p="parentNode",w="children",b="childNodes",m="insertBefore",x="nodeName",u="Attribute",$="get"+u,y="set"+u,k="remove"+u,M="replace",z="value",C="length",E="indexOf",N="substring",L="push",T="preventDefault",S="click",R="focus",A="blur",B="select",_="keydown",O="paste",j="error",H="test",D="contenteditable",I="readonly",K="spellcheck",U="placeholder",q="getSelection",P="getRangeAt",F="rangeCount",X="addRange",Q="removeAllRanges",W=r+"Range",u="Contents",J="clone"+u,Y="delete"+u,G=B+"Node",V=G+u,Z="insertNode",ee="cloneRange",ne="collapse",te="setStart",ie="setEnd",re=te+"Before",fe=te+"After",oe=ie+"Before",ue=ie+"After",se=!0,ce=!1,ae=null,le="div",u="Key",de="ctrl"+u,ve="shift"+u,he="keyCode",pe=setTimeout;!function(e){e.version="1.1.3",e[i]={},e.each=function(n,t){return pe(function(){var r,t=e[i];for(r in t)n(t[r],r,t)},0===t?0:t||1),e},e.x="​"}(e[t]=function(u,l){function an(){return we=e[q]&&e[q]()||{},we[F]&&we||ae}function ln(e){return we=an(),we&&we[P](e||0)||ae}function dn(e,n,t){if(e){if(we=an()){var r,f,i=me(le);for(r=0,f=we[F];f>r;++r)i[g](we[P](r)[J]());return e=Ee(i[s].split(He)),e=ke(n)||n?d.f(e):e,ke(t)||t?e:e[M](ze(Fe,"g"),"\n\n")[M](ze(Xe,"g"),"")}return""}return an()+""}function vn(e,n){var r,f,o,u,t=dn(1,0,0),i=Te(t);if(i&&i[0][C]&&(be=ln(),be[Y](),be[Z](i[1])),i=i[0],e){for(o=0,u=i[C];u>o;++o)if(r=i[o],xe(r[x])===e)return r;return(ke(n)||n)&&(o=wn(),f=hn(He+t),f=f&&f[0]&&f[0][p],f&&xe(f[x])===e&&f!==_e)?(f[s]=Ee(f[s].split(He)),t&&t!==f[s]?bn(o):xn([f]),f):ae}return i[C]?i:ae}function gn(e){return(be=ln())&&(e=1===e?ce:0===e?se:e,be[ne](e)),be}function hn(e,n){if(Ve[R]){var t=Te(e);return(we=an())&&(be=ln(),be[Y](),be[Z](t[1]),0===n?gn(1):1===n&&(hn(e,se),gn(0)),we[Q](),we[X](be)),t[0]}return ae}function pn(n){try{var t=vn("a"),i=Ce(dn(1,1,0),"a");n=Ce(n[M](/^\s*javascript:/i,""));var f=n[0],o=e.location.hostname;return f=-1!=="/?&#"[E](f)||-1===n[E]("/"),!o||0!==n[E]("//"+o)&&-1===n[E]("://"+o)||(f=1),i||(hn(n,se),i=n),n?(t?t[y]("href",n):t=hn('<a href="'+n+'">'+i+"</a>",se)[0],f?(t[k]("rel"),t[k]("target")):(t[y]("rel","nofollow"),t[y]("target","_blank"))):(t&&(i=t[s],t[p][h](t)),t=hn(i,se)[0]),t}catch(u){}return ae}function wn(){var e,n,t;return(e=ln())?(n=e[ee](),n[V](_e),n[ie](e.startContainer,e.startOffset),t=(n+"")[C],[t,t+(e+"")[C]]):ae}function bn(t){if(t){var r,o,s,c,a,l,i=n[W](),f=0,u=[_e];for(i[te](_e,0),i[ne](se);!l&&(c=u.pop());)if(ye(c))o=f+c[C],!a&&t[0]>=f&&t[0]<=o&&(i[te](c,t[0]-f),a=1),a&&t[1]>=f&&t[1]<=o&&(i[ie](c,t[1]-f),l=1),f=o;else for(s=c[b][C];s--;)u[L](c[b][s]);r=e[q](),r[Q](),r[X](i)}}function mn(){return Te(dn(1,1,0))[0]}function xn(e,n){n=ke(n)||!n;var t=e[0],i=e[e[C]-1];return we=an(),be=ln(),1===e[C]?be[n?V:G](t):(be[n?fe:re](t),be[n?oe:ue](i)),we[Q](),we[X](be),e}function $n(e,n,t){if(Ve[R]){ke(n)&&(n=-1);var o,a,l,i=vn(e),r=dn(1,0,0),f=[];if(0===n||-1===n&&i){if(i){o=i[s],i[p][h](i);var d=Ce(r,e),v=Ce(o,e);if(-1!==v[E](d)&&d[C]<v[C])i=ze("<"+e+"(\\s[^<>]*?)?>","i").exec(i[c]),i=i&&i[1]||"",r=Te([o[N](0,o[E](d)),d,o[N](o[E](d)+d[C])])[0],r[0]&&hn("<"+e+i+">"+(r[0][c]||r[0])+"</"+e+">",0),r[2]&&hn("<"+e+i+">"+(r[2][c]||r[2])+"</"+e+">",1),f=hn(r[1][c]||r[1],se);else{if(f=Te(r),o=me(le),f&&f[2]&&(l=f[2][C]))for(a=0;l>a;++a)f[2][a]===e?o[s]+=f[0][a][s]:o[g](f[0][a]);f=hn(o[s],se)}}}else(1===n||-1===n&&!i)&&(r=r&&r[M](ze("(\\n|"+qe+"){2,}","gi"),"</"+e+">"+je+je+"<"+e+">"),f=hn("<"+e+">"+(r||t||"")+"</"+e+">",se));return f[0]||ae}return ae}function yn(e,n){R in e&&(e.selectionStart=e.selectionEnd=ke(n)?e[z][C]:n,e[R]())}function kn(e,n){var t=e[a];return ze("(^|\\s)\\s*"+n+"\\s*(\\s|$)")[H](t)?e:(e[a]=Ce(t+" "+n),e)}function Mn(e,n){var t=Ce(e[a][M](ze("(^|\\s)\\s*"+n+"\\s*(\\s|$)","g"),"$1$2"));return t?e[a]=t:e[k]("class"),e}function zn(e,n,t,i){function o(e){i.apply(this,[e,d,r]),En(),_e[R](),Me(nn)&&nn(e,d,_e),e[T]()}var r=kn(me("a"),n),f=t[1]||t[0];return 0===f[E]("svg:")&&(f=$e+f.slice(4)+Se),r[s]="<span>"+f+"</span>",r.title=e,r.href="javascript:;",i&&(Ne(r,"touchstart",o),Ne(r,"mousedown",o)),[r,i]}function Cn(){_e[s]=d.f(u[z])[M](ze(Fe,"gi"),je+je)[M](ze(Xe,"gi"),"")}function En(){var e=d.f(_e[s]);Re.tidy&&(e=e[M](ze(Fe,"gi"),"</p>\n\n<p$1>")[M](ze(Ie,"gi"),je+"\n")),u[z]=e}function Nn(e){return xe(e.key||String.fromCharCode(e[he]))}function Sn(e){var n=e[de],t=e[ve],i=e[he],r=Nn(e);n&&t&&("x"===r||88===i)&&en?(cn.x[1](),e[T]()):t||"enter"!==r&&13!==i||Me(Ze)&&Ze(e,d,u),Me(nn)&&nn(e,d,u),pe(function(){Cn(),bn(d.$[1])},1)}function Rn(){if(Ae[p])return d;kn(u,tn+"-source"),Ne(u,_,Sn),Ye=Re.tools;for(Ge in Ye)if(Ge=Ye[Ge],cn[Ge]){if("x"===Ge&&!en)continue;Be[g](cn[Ge][0])}Ae[g](_e),Ln&&"p"===xe(Ln[x])&&(Ln[m](Tn,u),Ln[p][m](u,Ln),Ln[p][h](Ln)),u[p][m](Ae,u),Ae[g](u),Ae[g](Be),kn(Oe,tn+"-d"),Oe[s]='<input type="text">',d.d.x();var e=Oe[w][0];return e[y](K,ce),Ne(e,S,function(){Ve[j]=ce,Mn(Ae,j)}),Ne(e,_,function(e){var n=this,t=e[de],i=e[ve],r=e[he],f=Nn(e);t||i||"enter"!==f&&13!==r?i||"escape"!==f&&27!==r&&(n[z][C]||"backspace"!==f&&8!==r)||(d.d.x(1,1),Je=0,e[T]()):(d.d.x(1,1),Je&&Je(e,d,n),Je=0,n[z]="",Me(nn)&&nn(e,d,_e),e[T]())}),Ae[g](Oe),d}function An(){return Ae[p]?(Ln&&(Ae[p][m](Ln,Ae),Ln[m](u,Tn),Ln[h](Tn)),u[f][o]="",u[$](f)||u[k](f),Mn(u,tn+"-source"),Le(u,_,Sn),Ae[p][h](Ae),d):d}var Je,Ye,Ge,d=this,v="⌘",ge="⇧",$e='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',Se='"></path></svg>',Re={classes:["rich-text-editor"],tags:["a|abbr|b|br|code|dfn|del|em|i|ins|kbd|mark|p|span|strong|u|var"],blocks:["article|aside|blockquote|figure|figcaption|figure|h[1-6]|header|div|li|[ou]l|p|pre|section|table|tr|th"],attributes:["class|data-[\\w-]+?|href|id|rel|style|target|title"],tools:["b","i","u","x"],text:{b:["Bold",$e+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+Se,v+"+B"],i:["Italic",$e+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+Se,v+"+I"],u:["Underline",$e+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+Se,v+"+U"],a:["Link",$e+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+Se,v+"+L"],x:["Source",$e+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+Se,v+"+"+ge+"+X"]},tidy:1,enter:1,x:1,update:0},Ae=me(le),Be=me(le),_e=me(le),Oe=me(le),je="<br>",He=e[t].x,De="(\\s[^<>]*?)?",Ie="<br"+De+"\\s*\\/?>",Ke="<p"+De+">",Ue="<\\/p>",De="\\s*",qe=De+"(?:"+Ie+")"+De,Pe="^"+De+Ke+"(?:"+qe+")*"+De+"|"+De+"(?:"+qe+")*"+Ue+De+"$",Fe=De+"(?:"+qe+")*"+Ue+De+Ke+"(?:"+qe+")*"+De,Xe=De+"(?:"+Ke+"(?:"+qe+")*|(?:"+qe+")*"+Ue+")"+De,Qe=De+Ke+"(?:"+qe+")*"+De+"(?:"+qe+")*"+Ue+De,We=De+Ke+"(?:"+qe+")*(?:[\\s\\S]*?)(?:"+qe+")*"+Ue+De;d.is={view:se,source:ce,d:ce,e:function(e){var n=an()[R+"Node"];if(!n)return ae;if(ye(n)&&(n=n[p]),n===_e){if((n=dn(1,1,0))&&-1!==xe(n)[E]("</"+e+">"))return hn(n,se)[0]}else{if(n[x]&&xe(n[x])===e)return n;for(;n&&n!==_e;){if(n[x]&&xe(n[x])===e)return n;n=n[p]}}return ae},focus:ce,blur:se,error:ce},l=l||{};for(Ge in Re)ke(l[Ge])||(Re[Ge]=l[Ge]);var Ve=d.is,Ze=Re.enter,en=Re.x,nn=Re.update,tn=Re.classes[0],rn=Re.text||{},fn=Ee(Re.tags,"|"),on=Ee(Re.attributes,"|"),un=Ee(Re.blocks,"|"),sn=0,cn={b:function(){$n("strong")},i:function(){$n("em")},u:function(){$n("u")},a:function(e){var t,i,n=Ce(dn(1,1,0)).split(/\s/)[0];/^[a-z\d]+:\/\/\S+$/[H](n)?(vn("a")?$n("a",0):pn(n),En()):Ve.d?d.d.x(1):((t=vn("a"))&&(i=t[$]("href")),De="http://",d.d(De,(i?i[M](/\/+$/,""):De+xe(n))||"",function(e,n,t){pn(t[z]),En()}),pe(function(){i&&Oe[w][0][B]()},2))},x:function(e){if(en){var n=_e.offsetHeight;n&&(u[f][o]=n+"px"),sn?(d.$[0]=wn(),kn(Ae,"view"),Mn(Ae,"source"),_e[R](),bn(d.$[1]),sn=0):(d.$[1]=wn(),kn(Ae,"source"),Mn(Ae,"view"),u[R](),bn(d.$[0]),sn=1),Ve.view=!sn,Ve.source=!!sn,d.d.x(0,1),Me(en)&&en(e,d,sn||0)}}};d.$=[ae,ae],d.$$=function(e,n){var t=[an(),ln(n)];return ke(e)?t:t[e]},d.d=function(e,n,t){var i=Oe[w][0];return i[U]=e,i[z]=n,pe(function(){yn(i)},1),Je=t,d.d.v(1),d},d.d.x=function(e,n){var t=Oe[w][0],i=t[z];return i&&!n?(kn(Ae,j),Ve[j]=se,Ve.d=se,pe(function(){Ve[R]=ce,Ve[A]=se,t[R](),t[B]()},1)):(Mn(Ae,"d"),Mn(Ae,j),Ve.d=ce),Ve[R]=se,Ve[A]=ce,e&&(d[R](),bn(d.$[1])),d},d.d.v=function(e){return kn(Ae,"d"),Mn(Ae,j),Ve[j]=ce,Ve.d=se,d.$[1]=e?wn():ae,d},e[t][i][u.id||u.name||Object.keys(e[t][i])[C]]=d,d.t=function(e,n,t,i){var r=zn(n[0]+(n[2]?" ("+n[2]+")":""),tn+"-t:"+e,n,t);return ke(i)?i=ae:0>i&&(i=Be[w][C]+i),Be[m](r[0],Be[w][i]||ae),d.t[e]=r[1],d.t[e].e=r[0]};for(Ge in cn)d.t[Ge]=cn[Ge],cn[Ge]=zn(rn[Ge][0]+(rn[Ge][2]?" ("+rn[Ge][2]+")":""),tn+"-t:"+Ge,rn[Ge],cn[Ge]),d.t[Ge].e=cn[Ge][0];d.f=function(e){return e=Ee(e[M](/\r/g,"").split(He)),e=e[M](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(e,n,t){return n===t?"":e}),e=e[M](/<code(\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(e,n,t){return"<code"+(n||"")+">"+t[M](/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")[M](/ /g,"&nbsp;")+"</code>"}),e=e[M](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(e,n,t,i){if(t=xe(t),!ze("^("+fn+"|"+un+")$")[H](t))return"";(i=i||"")&&(i=i[M](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(e,n,t){return ze("^("+on+")$")[H](n)?e:""}));var r=/^(h[1-6]|th)$/[H](t),f=/^((fig)?caption)$/[H](t),o=n?"":i;return"b"===t||"strong"===t||r?"<"+n+"strong"+o+">"+(r&&n?je+je:""):"i"===t||"em"===t||f?"<"+n+"em"+o+">":ze("^("+fn+")$")[H](t)?"<"+n+t+o+">":ze("^("+un+")$")[H](t)?je+je:""}),e=e[M](ze(Fe,"gi"),"</p><p$1>")[M](ze(qe,"gi"),je)[M](/\n/g,je)[M](ze("(?:"+qe+"){3,}","gi"),je+je)[M](ze("^(?:"+qe+")+|(?:"+qe+")+$","gi"),"")[M](ze("(?:"+qe+"){2,}","gi"),"</p><p>")[M](ze(Qe,"gi"),""),e=e&&!ze("^"+We+"$","gi")[H](e)?"<p>"+e+"</p>":e,e=Te(e),e[3]||""},Cn(),En(),kn(Ae,tn+" view"),u[y](K,ce),kn(Be,tn+"-tool"),kn(_e,tn+"-view"),Ze&&kn(Ae,"expand"),_e[y](D,se),_e[y](K,ce),_e[y](U,u[U]||""),Ne(_e,R,function(){Ve[R]=se,Ve[A]=ce,kn(Ae,R)}),Ne(_e,A,function(){Ve[R]=ce,Ve[A]=se,En(),Mn(Ae,R)}),Ne(_e,O,function(){pe(function(){Cn();var e=_e[s];_e[s]="",hn(e,0)},1)}),Ne(_e,_,function(e){var o,n=e[de],t=e[ve],i=e[he],r=Ae,f=Nn(e);if(!n||t||"b"!==f&&66!==i)if(!n||t||"i"!==f&&73!==i)if(!n||t||"u"!==f&&85!==i)if(!n||t||"l"!==f&&76!==i){if(n&&t&&("x"===f||88===i)&&en)cn.x[1](),e[T]();else if(!t&&("enter"===f||13===i))if(Ze&&(we=an(),be=ln(),hn(je,0),hn(He,1),e[T]()),Ze)Me(Ze)&&Ze(e,d,_e);else{for(;r=r[p];)if("form"===xe(r[x])){o=r;break}o&&(o.submit(),e[T]())}}else cn.a[1](),e[T]();else cn.u[1](),e[T]();else cn.i[1](),e[T]();else cn.b[1](),e[T]();Me(nn)&&nn(e,d,_e),pe(function(){var e=_e[s][M](ze(He,"g"),"");e&&e!==je||(_e[s]=""),En()},1)});var Ln=u[p],Tn=me("a");return Rn(),d.config=Re,d.container=Ae,d.view=_e,d.source=d.target=u,d.tool=Be,d.dialog=Oe,d.c=gn,d.e=vn,d.g=Te,d.i=hn,d.m=xn,d.n=mn,d.r=bn,d.s=wn,d.v=dn,d.w=$n,d[r]=Rn,d.destroy=An,d[R]=function(e){if(Ve.view){var t=_e[s];_e[R](),d.$[1]&&bn(d.$[1]),Ve[R]=se,Ve[A]=ce,0===e?(_e[s]="",hn(t,1)):1===e?(_e[s]="",hn(t,0)):e===se&&(be=n[W](),be[V](_e),we=an(),we[Q](),we[X](be))}else Ve.source&&(u[R](),0===e?yn(u,0):1===e?yn(u,u[z][C]):e===se&&u[B]());return d},d[A]=function(){return Ve.view?(Ve[R]=ce,Ve[A]=se,_e[A]()):Ve.source&&u[A](),d},d.set=function(e,n){return e=d.f(e),(Ve.view||1===n)&&(e=e[M](ze(Pe,"gi"),"")[M](ze(Fe,"gi"),je+je)),ke(n)?Ve.view?(_e[s]=e,En()):Ve.source?(u[z]=e,Cn()):Ve.d&&(Oe[w][0][z]=e):0===n?(u[z]=e,Cn()):1===n&&(_e[s]=e,En()),d},d.get=function(e,n){if(ke(n)){var t;return t=Ve.source?u[z]:Ve.d?Oe[w][0][z]:u[z],t?t:e}return 0===n?u[z]||e:1===n?_e[s]||e:void 0},d.disable=function(){return _e[k](D),u[y](I,se),d},d.enable=function(){return _e[y](D,se),u[k](I),we},d})}(window,document,"RTE");