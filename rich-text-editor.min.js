/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.2.0
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,n,i){function me(e){return n[f+"Element"](e)}function $e(e){return e.toLowerCase()}function ye(e){return"string"==typeof e}function ke(e){return 3===e.nodeType}function ze(e){return"undefined"==typeof e}function Me(e){return"function"==typeof e}function Ce(e,n){return new RegExp(e,n)}function Se(e,n){return n=n||"[\\w-:]+",e[M](Ce("<\\/"+n+">|<"+n+"(\\s[^<>]*?)?>","gi"),"")[M](/ +/g," ")[M](/^\s*|\s*$/g,"")}function Ne(e,n){return e.join(n||"")}function Re(e,n,i){return e[v](n,i,ae)}function Be(e,n,i){return e[d](n,i)}function Ee(e){var o,i=me(ve),t=n[f+"DocumentFragment"](),r=[],u=[],s="";if(ye(e)){for(i[c]=e;o=i[g];)u[B]($e(o[$]||"")),r[B](t[h](o));return[r,t,u,e]}for(u in e)(o=e[u])&&(ye(o)?(s+=o,i[c]=o,o=i[g]):s+=o[a],r[B]($e(o[$]||"")),t[h](o));return[e,t,r,s]}var be,xe,t="__instance__",r="lot",f="create",u="style",o="minHeight",s="HTML",c="inner"+s,a="outer"+s,l="className",s="EventListener",v="add"+s,d="remove"+s,s="Child",g="first"+s,h="append"+s,p="remove"+s,w="parentNode",b="children",x="childNodes",m="insertBefore",$="nodeName",s="Attribute",y="get"+s,k="set"+s,z="remove"+s,M="replace",C="value",S="length",N="indexOf",R="substring",B="push",E="preventDefault",A="click",L="focus",_="blur",j="select",T="keydown",q="paste",H="error",O="test",D="contenteditable",I="readonly",U="spellcheck",F="placeholder",K="getSelection",X="getRangeAt",G="rangeCount",J="addRange",P="removeAllRanges",Q=f+"Range",s="Contents",V="clone"+s,W="delete"+s,Y=j+"Node",Z=Y+s,ee="insertNode",ne="cloneRange",ie="collapse",te="setStart",re="setEnd",fe=te+"Before",ue=te+"After",oe=re+"Before",se=re+"After",ce=!0,ae=!1,le=null,ve="div",s="Key",de="ctrl"+s,ge="shift"+s,pe="keyCode",we=setTimeout;!function(e){e.version="1.2.0",e[t]={},e.each=function(n,i){return we(function(){var r,i=e[t];for(r in i)n(i[r],r,i)},0===i?0:i||1),e},e.x="​"}(e[i]=function(s,v){function ln(){return be=e[K]&&e[K]()||{},be[G]&&be||le}function vn(e){return be=ln(),be&&be[X](e||0)||le}function dn(e,n,i){if(e){if(be=ln()){var r,f,t=me(ve);for(r=0,f=be[G];f>r;++r)t[h](be[X](r)[V]());return e=Ne(t[c].split(Oe)),e=ze(n)||n?d.f(e):e,ze(i)||i?e:e[M](Ce(Ge,"g"),"\n\n")[M](Ce(Je,"g"),"")}return""}return ln()+""}function gn(e,n){var r,f,u,o,i=dn(1,0,0),t=Ee(i);if(t&&t[0][S]&&(xe=vn(),xe[W](),xe[ee](t[1])),t=t[0],e){for(u=0,o=t[S];o>u;++u)if(r=t[u],$e(r[$])===e)return r;return(ze(n)||n)&&(u=bn(),f=pn(Oe+i),f=f&&f[0]&&f[0][w],f&&$e(f[$])===e&&f!==Te)?(f[c]=Ne(f[c].split(Oe)),i&&i!==f[c]?xn(u):$n([f]),f):le}return t[S]?t:le}function hn(e){return(xe=vn())&&(e=1===e?ae:0===e?ce:e,xe[ie](e)),xe}function pn(e,n){if(Ze[L]){var i=Ee(e);return(be=ln())&&(xe=vn(),xe[W](),xe[ee](i[1]),0===n?hn(1):1===n&&(pn(e,ce),hn(0)),be[P](),be[J](xe)),i[0]}return le}function wn(n){try{var i=gn("a"),t=Se(dn(1,1,0),"a");n=Se(n[M](/^\s*javascript:/i,""));var f=n[0],u=e.location.hostname;return f=-1!=="/?&#"[N](f)||-1===n[N]("/"),!u||0!==n[N]("//"+u)&&-1===n[N]("://"+u)||(f=1),t||(pn(n,ce),t=n),n?(i?i[k]("href",n):i=pn('<a href="'+n+'">'+t+"</a>",ce)[0],f?(i[z]("rel"),i[z]("target")):(i[k]("rel","nofollow"),i[k]("target","_blank"))):(i&&(t=i[c],i[w][p](i)),i=pn(t,ce)[0]),i}catch(o){}return le}function bn(){var e,n,i;return(e=vn())?(n=e[ne](),n[Z](Te),n[re](e.startContainer,e.startOffset),i=(n+"")[S],i=[i,i+(e+"")[S]],i[1]-i[0]===1?[i[0],i[0]]:i):le}function xn(i){if(i){var r,u,s,c,a,l,t=n[Q](),f=0,o=[Te];for(t[te](Te,0),t[ie](ce);!l&&(c=o.pop());)if(ke(c))u=f+c[S],!a&&i[0]>=f&&i[0]<=u&&(t[te](c,i[0]-f),a=1),a&&i[1]>=f&&i[1]<=u&&(t[re](c,i[1]-f),l=1),f=u;else for(s=c[x][S];s--;)o[B](c[x][s]);r=e[K](),r[P](),r[J](t)}}function mn(){return Ee(dn(1,1,0))[0]}function $n(e,n){n=ze(n)||!n;var i=e[0],t=e[e[S]-1];return be=ln(),xe=vn(),1===e[S]?xe[n?Z:Y](i):(xe[n?ue:fe](i),xe[n?oe:se](t)),be[P](),be[J](xe),e}function yn(e,n,i){if(Ze[L]){ze(n)&&(n=-1);var u,s,l,t=gn(e),r=dn(1,0,0),f=[];if(0===n||-1===n&&t){if(t){u=t[c],t[w][p](t);var v=Se(r,e),d=Se(u,e);if(-1!==d[N](v)&&v[S]<d[S])t=Ce("<"+e+"(\\s[^<>]*?)?>","i").exec(t[a]),t=t&&t[1]||"",r=Ee([u[R](0,u[N](v)),v,u[R](u[N](v)+v[S])])[0],r[0]&&pn("<"+e+t+">"+(r[0][a]||r[0])+"</"+e+">",0),r[2]&&pn("<"+e+t+">"+(r[2][a]||r[2])+"</"+e+">",1),f=pn(r[1][a]||r[1],ce);else{if(f=Ee(r),u=me(ve),f&&f[2]&&(l=f[2][S]))for(s=0;l>s;++s)f[2][s]===e?u[c]+=f[0][s][c]:u[h](f[0][s]);f=pn(u[c],ce)}}}else(1===n||-1===n&&!t)&&(t||(r=r&&r[M](Ce("(\\n|"+Ke+"){2,}","gi"),"</"+e+">"+He+He+"<"+e+">")),f=pn("<"+e+">"+(r||i||"")+"</"+e+">",ce));return f[0]||le}return le}function kn(e,n){L in e&&(e.selectionStart=e.selectionEnd=ze(n)?e[C][S]:n,e[L]())}function zn(e,n){var i=e[l];return Ce("(^|\\s)\\s*"+n+"\\s*(\\s|$)")[O](i)?e:(e[l]=Se(i+" "+n),e)}function Mn(e,n){var i=Se(e[l][M](Ce("(^|\\s)\\s*"+n+"\\s*(\\s|$)","g"),"$1$2"));return i?e[l]=i:e[z]("class"),e}function Cn(e,n,i,t){function u(e){t.apply(this,[e,d,r]),Nn(),Te[L](),Me(tn)&&tn(e,d,Te),e[E]()}var r=zn(me("a"),n),f=i[1]||i[0];return 0===f[N]("svg:")&&(f=ye+f.slice(4)+Ae),r[c]="<span>"+f+"</span>",r.title=e,r.href="javascript:;",t&&(Re(r,"touchstart",u),Re(r,"mousedown",u)),[r,t]}function Sn(){Te[c]=d.f(s[C])[M](Ce(Ge,"gi"),He+He)[M](Ce(Je,"gi"),"")}function Nn(){var e=d.f(Te[c]);Le.tidy&&(e=e[M](Ce(Ge,"gi"),"</p>\n\n<p$1>")[M](Ce(Ie,"gi"),He+"\n")),s[C]=e}function Rn(e){return $e(e.key||String.fromCharCode(e[pe]))}function An(e){var n=e[de],i=e[ge],t=e[pe],r=Rn(e);n&&i&&("x"===r||88===t)&&nn?(an.x[1](),e[E]()):i||"enter"!==r&&13!==t||Me(en)&&en(e,d,s),Me(tn)&&tn(e,d,s),we(Sn,2)}function Ln(){Ze.view&&Te[L]()}function _n(){if(_e[w])return d;zn(s,rn+"-source"),Re(s,T,An),Re(s,L,Ln),We=Le.tools;for(Ye in We)if(Ye=We[Ye],an[Ye]){if("x"===Ye&&!nn)continue;je[h](an[Ye][0])}_e[h](Te),Bn&&"p"===$e(Bn[$])&&(Bn[m](En,s),Bn[w][m](s,Bn),Bn[w][p](Bn)),s[w][m](_e,s),_e[h](s),_e[h](je),zn(qe,rn+"-d"),qe[c]='<input type="text">',d.d.x();var e=qe[b][0];return e[k](U,ae),Re(e,A,function(){Ze[H]=ae,Mn(_e,H)}),Re(e,T,function(e){var n=this,i=e[de],t=e[ge],r=e[pe],f=Rn(e);i||t||"enter"!==f&&13!==r?t||"escape"!==f&&27!==r&&(n[C][S]||"backspace"!==f&&8!==r)||(d.d.x(1,1),Ve=0,e[E]()):(d.d.x(1,1),Ve&&Ve(e,d,n),Ve=0,n[C]="",Me(tn)&&tn(e,d,Te),e[E]())}),_e[h](qe),Sn(),Nn(),d}function jn(){return _e[w]?(Bn&&(_e[w][m](Bn,_e),Bn[m](s,En),Bn[p](En)),s[u][o]="",s[y](u)||s[z](u),Mn(s,rn+"-source"),Be(s,T,An),Be(s,L,Ln),_e[w][p](_e),Sn(),Nn(),d):d}var Ve,We,Ye,d=this,g="⌘",he="⇧",ye='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',Ae='"></path></svg>',Le={classes:["rich-text-editor"],tags:["a|abbr|b|br|code|dfn|del|em|i|ins|kbd|mark|p|span|strong|u|var"],blocks:["article|aside|blockquote|figure|figcaption|figure|h[1-6]|header|div|li|[ou]l|p|pre|section|table|tr|th"],attributes:["class|data-[\\w-]+?|href|id|rel|style|target|title"],tools:["b","i","u","x"],text:{b:["Bold",ye+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+Ae,g+"+B"],i:["Italic",ye+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+Ae,g+"+I"],u:["Underline",ye+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+Ae,g+"+U"],a:["Link",ye+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+Ae,g+"+L"],x:["Source",ye+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+Ae,g+"+"+he+"+X"]},tidy:1,enter:1,x:1,update:0},_e=me(ve),je=me(ve),Te=me(ve),qe=me(ve),He="<br>",Oe=e[i].x,De="(\\s[^<>]*?)?",Ie="<br"+De+"\\s*\\/?>",Ue="<p"+De+">",Fe="<\\/p>",De="\\s*",Ke=De+"(?:"+Ie+")"+De,Xe="^"+De+Ue+"(?:"+Ke+")*"+De+"|"+De+"(?:"+Ke+")*"+Fe+De+"$",Ge=De+"(?:"+Ke+")*"+Fe+De+Ue+"(?:"+Ke+")*"+De,Je=De+"(?:"+Ue+"(?:"+Ke+")*|(?:"+Ke+")*"+Fe+")"+De,Pe=De+Ue+"(?:"+Ke+")*"+De+"(?:"+Ke+")*"+Fe+De,Qe=De+Ue+"(?:"+Ke+")*(?:[\\s\\S]*?)(?:"+Ke+")*"+Fe+De;d.is={view:ce,source:ae,d:ae,e:function(e){var n=ln()[L+"Node"];if(!n)return le;if(ke(n)&&(n=n[w]),n===Te){if((n=dn(1,1,0))&&-1!==$e(n)[N]("</"+e+">"))return pn(n,ce)[0]}else{if(n[$]&&$e(n[$])===e)return n;for(;n&&n!==Te;){if(n[$]&&$e(n[$])===e)return n;n=n[w]}}return le},focus:ae,blur:ce,error:ae},v=v||{};for(Ye in Le)ze(v[Ye])||(Le[Ye]=v[Ye]);var Ze=d.is,en=Le.enter,nn=Le.x,tn=Le.update,rn=Le.classes[0],fn=Le.text||{},un=Ne(Le.tags,"|"),on=Ne(Le.attributes,"|"),sn=Ne(Le.blocks,"|"),cn=0,an={b:function(){yn("strong")},i:function(){yn("em")},u:function(){yn("u")},a:function(e){var i,t,n=Se(dn(1,1,0)).split(/\s/)[0];/^[a-z\d]+:\/\/\S+$/[O](n)?(gn("a")?yn("a",0):wn(n),Nn()):Ze.d?d.d.x(1):((i=gn("a"))&&(t=i[y]("href")),De="http://",d.d(De,(t?t[M](/\/+$/,""):De+$e(n))||"",function(e,n,i){wn(i[C]),Nn()}),we(function(){t&&qe[b][0][j]()},2))},x:function(e){if(nn){var n=Te.offsetHeight;n&&(s[u][o]=n+"px"),cn?(d[r][0]=bn(),zn(_e,"view"),Mn(_e,"source"),Te[L](),xn(d[r][1]),cn=0):(d[r][1]=bn(),zn(_e,"source"),Mn(_e,"view"),s[L](),xn(d[r][0]),cn=1),Ze.view=!cn,Ze.source=!!cn,d.d.x(0,1),Me(nn)&&nn(e,d,cn||0)}}};d.$$=function(e,n){var i=[ln(),vn(n)];return ze(e)?i:i[e]},d[r]=[le,le],d.d=function(e,n,i){var t=qe[b][0];return t[F]=e,t[C]=n,we(function(){kn(t)},1),Ve=i,d.d.v(1),d},d.d.x=function(e,n){var i=qe[b][0],t=i[C];return t&&!n?(zn(_e,H),Ze[H]=ce,Ze.d=ce,we(function(){Ze[L]=ae,Ze[_]=ce,i[L](),i[j]()},1)):(Mn(_e,"d"),Mn(_e,H),Ze.d=ae),Ze[L]=ce,Ze[_]=ae,e&&(d[L](),xn(d[r][1])),d},d.d.v=function(e){return zn(_e,"d"),Mn(_e,H),Ze[H]=ae,Ze.d=ce,e&&(d[r][1]=bn()),d},e[i][t][s.id||s.name||Object.keys(e[i][t])[S]]=d,d.t=function(e,n,i,t){var r=Cn(n[0]+(n[2]?" ("+n[2]+")":""),rn+"-t:"+e,n,i);return ze(t)?t=le:0>t&&(t=je[b][S]+t),je[m](r[0],je[b][t]||le),d.t[e]=r[1],d.t[e].e=r[0]};for(Ye in an)d.t[Ye]=an[Ye],an[Ye]=Cn(fn[Ye][0]+(fn[Ye][2]?" ("+fn[Ye][2]+")":""),rn+"-t:"+Ye,fn[Ye],an[Ye]),d.t[Ye].e=an[Ye][0];d.f=function(e){return e=Ne(e[M](/\r/g,"").split(Oe)),e=e[M](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(e,n,i){return n===i?"":e}),e=e[M](/<code(\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(e,n,i){return"<code"+(n||"")+">"+i[M](/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")[M](/ /g,"&nbsp;")+"</code>"}),e=e[M](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(e,n,i,t){if(i=$e(i),!Ce("^("+un+"|"+sn+")$")[O](i))return"";(t=t||"")&&(t=t[M](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(e,n,i){return Ce("^("+on+")$")[O](n)?e:""}));var r=/^(h[1-6]|th)$/[O](i),f=/^((fig)?caption)$/[O](i),u=n?"":t;return"b"===i||"strong"===i||r?"<"+n+"strong"+u+">"+(r&&n?He+He:""):"i"===i||"em"===i||f?"<"+n+"em"+u+">":Ce("^("+un+")$")[O](i)?"<"+n+i+u+">":Ce("^("+sn+")$")[O](i)?He+He:""}),e=e[M](Ce(Ge,"gi"),"</p><p$1>")[M](Ce(Ke,"gi"),He)[M](/\n/g,He)[M](Ce("(?:"+Ke+"){3,}","gi"),He+He)[M](Ce("^(?:"+Ke+")+|(?:"+Ke+")+$","gi"),"")[M](Ce("(?:"+Ke+"){2,}","gi"),"</p><p>")[M](Ce(Pe,"gi"),""),e=e&&!Ce("^"+Qe+"$","gi")[O](e)?"<p>"+e+"</p>":e,e=Ee(e),e[3]||""},Sn(),Nn(),zn(_e,rn+" view"),s[k](U,ae),zn(je,rn+"-tool"),zn(Te,rn+"-view"),en&&zn(_e,"expand"),Te[k](D,ce),Te[k](U,ae),Te[k](F,s[F]||""),Re(Te,L,function(){Ze[L]=ce,Ze[_]=ae,zn(_e,L),s.required&&(""===s[C]||(Ze[H]=ae,Mn(_e,H)))}),Re(Te,_,function(){Ze[L]=ae,Ze[_]=ce,Nn(),Mn(_e,L),s.required&&(""===s[C]?(Ze[H]=ce,zn(_e,H)):(Ze[H]=ae,Mn(_e,H)))}),Re(Te,q,function(){we(function(){var e=bn();Nn(),Sn(),Te[_](),xn(e)},1)}),Re(Te,T,function(e){var u,n=e[de],i=e[ge],t=e[pe],r=_e,f=Rn(e);if(!n||i||"b"!==f&&66!==t)if(!n||i||"i"!==f&&73!==t)if(!n||i||"u"!==f&&85!==t)if(!n||i||"l"!==f&&76!==t){if(n&&i&&("x"===f||88===t)&&nn)an.x[1](),e[E]();else if(!i&&("enter"===f||13===t))if(en&&(be=ln(),xe=vn(),pn(He,0),pn(Oe,1),e[E]()),en)Me(en)&&en(e,d,Te);else{for(Nn();r=r[w];)if("form"===$e(r[$])){u=r;break}u&&(u.submit(),e[E]())}}else an.a[1](),e[E]();else an.u[1](),e[E]();else an.i[1](),e[E]();else an.b[1](),e[E]();Me(tn)&&tn(e,d,Te),we(function(){var e=Te[c][M](Ce(Oe,"g"),"");e&&e!==He||(Te[c]="")},0)});var Bn=s[w],En=me("a");return _n(),d.config=Le,d.container=_e,d.view=Te,d.source=d.target=s,d.tool=je,d.dialog=qe,d.c=hn,d.e=gn,d.g=Ee,d.i=pn,d.m=$n,d.n=mn,d.r=xn,d.s=bn,d.v=dn,d.w=yn,d[f]=_n,d.destroy=jn,d[L]=function(e){if(Ze.view){var i=Te[c];Te[L](),d[r][1]&&xn(d[r][1]),Ze[L]=ce,Ze[_]=ae,0===e?(Te[c]="",pn(i,1)):1===e?(Te[c]="",pn(i,0)):e===ce&&(xe=n[Q](),xe[Z](Te),be=ln(),be[P](),be[J](xe))}else Ze.source&&(s[L](),0===e?kn(s,0):1===e?kn(s,s[C][S]):e===ce&&s[j]());return d},d[_]=function(){return Ze.view?(Ze[L]=ae,Ze[_]=ce,Te[_]()):Ze.source&&s[_](),d},d.set=function(e,n){return e=d.f(e),(Ze.view||1===n)&&(e=e[M](Ce(Xe,"gi"),"")[M](Ce(Ge,"gi"),He+He)),ze(n)?Ze.view?(Te[c]=e,Nn()):Ze.source?(s[C]=e,Sn()):Ze.d&&(qe[b][0][C]=e):0===n?(s[C]=e,Sn()):1===n&&(Te[c]=e,Nn()),d},d.get=function(e,n){if(ze(n)){var i;return i=Ze.source?s[C]:Ze.d?qe[b][0][C]:s[C],i?i:e}return 0===n?s[C]||e:1===n?Te[c]||e:void 0},d.disable=function(){return Te[z](D),s[k](I,ce),d},d.enable=function(){return Te[k](D,ce),s[z](I),be},d})}(window,document,"RTE");